# MetalPro - Technical Implementation Plan

## Executive Summary

This document outlines the phased technical implementation plan for **MetalPro**, a B2B web platform for selling prime metal materials. The platform enables users to discover products, configure specifications, receive gross estimates, and submit RFQs (Request for Quote) for finalization with a dedicated sales team.

**Project Goal:** Build a modern, performant B2B e-commerce experience where users can explore metal materials (Profiles, Steel Plates, Pipes, Fasteners, Stainless Steel, Non-Ferrous Metals), configure specifications, and submit qualified RFQs to the sales team.

**Current Status:** Landing page with Hero Section, Category Grid, How It Works flow, Header, and Footer completed.

---

## Technology Stack

### Frontend Core
- **Framework:** React 18.3.1
- **Language:** TypeScript 5.8.3
- **Build Tool:** Vite 5.4.19
- **Compiler:** SWC (via @vitejs/plugin-react-swc)

### UI/UX Layer
- **Component Library:** shadcn/ui (Radix UI primitives)
- **Styling:** Tailwind CSS 3.4.17
- **Animations:** tailwindcss-animate
- **Icons:** lucide-react 0.462.0
- **Theming:** next-themes 0.3.0 (dark mode support)

### State Management & Data Fetching
- **Server State:** TanStack Query (React Query) 5.83.0
- **Form State:** React Hook Form 7.61.1
- **Form Validation:** Zod 3.25.76
- **Resolver:** @hookform/resolvers 3.10.0

### Routing & Navigation
- **Router:** React Router DOM 6.30.1

---

## Backend Technology Stack

### Backend Framework Options
**Recommended:** Node.js with Express/NestJS or Python with FastAPI

#### Option 1: Node.js + Express/NestJS (Recommended)
- **Runtime:** Node.js 20 LTS
- **Framework:** Express.js 4.x or NestJS 10.x
- **Language:** TypeScript 5.x (shared types with frontend)
- **Benefits:**
  - Type sharing with frontend
  - Fast development with unified language
  - Rich ecosystem for file processing (CSV/XLSX)
  - Easy integration with frontend team

#### Option 2: Python + FastAPI
- **Runtime:** Python 3.11+
- **Framework:** FastAPI 0.109+
- **Benefits:**
  - Excellent for data processing and BOM parsing
  - Strong typing with Pydantic
  - Auto-generated OpenAPI docs
  - High performance (async/await)

### Database Layer

#### Primary Database: PostgreSQL 15+
**Rationale:**
- ACID compliance for critical RFQ data
- Strong support for relational data (products, categories, RFQs)
- JSON/JSONB support for flexible cart snapshots
- Excellent performance with proper indexing
- Mature ecosystem and tooling

**Alternative:** MySQL 8+ or MariaDB 10.6+ (if team has existing expertise)

#### ORM/Query Builder
- **Node.js:** Prisma 5.x or TypeORM 0.3.x
- **Python:** SQLAlchemy 2.x with Alembic migrations

#### Database Schema Structure:
```sql
-- Core Tables
- products
- categories
- product_prices (historical pricing)
- rfqs (offer requests)
- rfq_items (line items in RFQ)
- users
- companies
- addresses
- attachments
- audit_logs
```

### Caching Layer
- **Redis 7+:** Session management, cart caching, rate limiting
- **Use Cases:**
  - Session storage for authenticated users
  - Cache product catalog for fast reads
  - Rate limiting for API endpoints
  - Job queue for async tasks (email sending, file processing)

### File Storage
- **Local Development:** Local filesystem
- **Production Options:**
  - **AWS S3:** Attachments, documents, BOM uploads
  - **Azure Blob Storage:** Alternative
  - **Cloudinary:** If image processing needed
  - **MinIO:** Self-hosted S3-compatible (on-premises option)

### Email Service
- **SendGrid:** Transactional emails (RFQ confirmations, notifications)
- **AWS SES:** Cost-effective alternative
- **Postmark:** High deliverability
- **Nodemailer:** For local development

### Background Jobs & Queue
- **Bull/BullMQ:** Redis-based job queue for Node.js
- **Celery:** For Python backend
- **Use Cases:**
  - Send email notifications
  - Process BOM uploads
  - Generate PDF quotes
  - Cleanup old sessions

### API Documentation
- **Swagger/OpenAPI 3.0:** Auto-generated API docs
- **Postman Collections:** For backend team testing
- **TypeScript Types:** Auto-generated from OpenAPI spec

### Authentication & Authorization
- **JWT (JSON Web Tokens):** Stateless authentication
- **bcrypt:** Password hashing
- **Express-rate-limit / fastapi-limiter:** Rate limiting
- **CORS:** Configured for frontend domain

### Logging & Monitoring
- **Winston (Node.js) / Loguru (Python):** Application logging
- **Sentry:** Error tracking and monitoring
- **Prometheus + Grafana:** Metrics and dashboards (optional)
- **Morgan (Node.js):** HTTP request logging

### DevOps & Infrastructure
- **Docker:** Containerization for all services
- **Docker Compose:** Local development environment
- **nginx:** Reverse proxy and load balancer
- **PM2 (Node.js):** Process manager for production
- **Gunicorn + Uvicorn (Python):** ASGI/WSGI server

### UI Components (shadcn/ui)
Complete suite of production-ready components:
- **Layout:** Card, Tabs, Accordion, Collapsible, Separator, Resizable Panels, Scroll Area
- **Forms:** Input, Textarea, Select, Checkbox, Radio Group, Switch, Slider, Calendar, Date Picker, Input OTP
- **Navigation:** Navigation Menu, Breadcrumb, Dropdown Menu, Context Menu, Menubar, Sidebar
- **Feedback:** Toast (Sonner), Alert, Alert Dialog, Dialog, Sheet, Drawer, Tooltip, Hover Card, Popover
- **Data Display:** Table, Badge, Avatar, Progress, Skeleton, Chart (Recharts integration)
- **Actions:** Button, Toggle, Toggle Group

### Date & Time
- **Date Utilities:** date-fns 3.6.0
- **Date Picker:** react-day-picker 8.10.1

### Charts & Visualization
- **Charts:** Recharts 2.15.4 (for analytics, material weight/cost visualization)

### Additional Libraries
- **Carousels:** embla-carousel-react 8.6.0
- **Class Management:** clsx 2.1.1, tailwind-merge 2.6.0, class-variance-authority 0.7.1
- **Command Palette:** cmdk 1.1.1
- **Drawer:** vaul 0.9.9

### Development Tools
- **Linting:** ESLint 9.32.0 with TypeScript support
- **TypeScript ESLint:** typescript-eslint 8.38.0
- **PostCSS:** 8.5.6
- **Autoprefixer:** 10.4.21
- **Typography Plugin:** @tailwindcss/typography 0.5.16

### Build & Deployment
- **Package Manager:** npm (package-lock.json present)
- **Dev Server:** Vite Dev Server (port 8080)
- **Deployment Target:** Static hosting (Netlify, Vercel, AWS S3/CloudFront)

---

## Current Implementation Status

### ‚úÖ Completed Components

#### Landing Page (Phase 1 - Complete)
- **Header** (`src/components/layout/Header.tsx`)
  - Contact ribbon with phone and hours
  - Logo and branding
  - Search bar with placeholder
  - Estimate cart button (badge showing 0 items)
  - "Cere OfertƒÉ" CTA
  - Navigation menu with 6 main categories

- **Hero Section** (`src/components/home/HeroSection.tsx`)
  - Value proposition headline
  - Subtitle with B2B focus
  - Trust indicators (real-time estimates, specialist support, fast delivery)
  - Dual CTAs ("Vezi Catalogul", "√éncarcƒÉ Lista BOM")
  - Stats section (500+ products, 24h response, 1000+ projects)

- **Category Grid** (`src/components/home/CategoryGrid.tsx`)
  - 6 product families with cards:
    1. Profile Metalice (UNP, HEA, IPE, UPN)
    2. Table de O»õel (DC01, S235JR, S355JR)
    3. »öevi »ôi Tuburi (rectangular, round)
    4. Elemente Asamblare (fasteners, DIN/ISO)
    5. O»õel Inoxidabil (304, 316L, 321)
    6. Metale Neferoase (aluminum, copper, bronze)
  - Each card displays specs, standards, and CTA

- **How It Works** (`src/components/home/HowItWorks.tsx`)
  - 4-step process visualization
  - Step indicators with icons
  - CTAs for catalog exploration and BOM upload

- **Footer** (`src/components/layout/Footer.tsx`)
  - Company info and description
  - Quick links to categories
  - Services section
  - Contact information
  - Legal links (Terms, Privacy, GDPR)

### üèóÔ∏è Architecture Setup
- **Routing:** React Router configured with Index and NotFound pages
- **State Management:** TanStack Query provider configured
- **UI System:** Toast notifications (Toaster + Sonner) and Tooltip provider
- **Styling:** Custom design tokens for industrial B2B aesthetic
- **Typography:** Inter font family with custom text scales
- **Color System:** HSL-based theming with primary, secondary, accent, muted, success, warning, info variants
- **Shadows:** Industrial shadow system (soft, medium, strong)
- **Animations:** Fade-in, slide-in, scale-in animations

---

## Phased Implementation Plan

### Phase 1: Foundation & Landing Page ‚úÖ COMPLETED
**Status:** Complete
**Timeline:** Complete
**Components Delivered:** Header, Hero, CategoryGrid, HowItWorks, Footer

---

### Phase 2: Product Catalog & Discovery System
**Timeline:** 2-3 weeks
**Goal:** Build the product browsing and filtering experience

#### 2.1 Data Layer & Types
**File:** `src/types/product.ts`
```typescript
// Define core TypeScript interfaces:
// - Unit, Availability, Incoterm enums
// - Category, Product, ProductFamily interfaces
// - Indicative pricing structures
// - Delivery estimate types
```

**File:** `src/lib/api/products.ts`
```typescript
// Product data API (mock data for now, later REST/GraphQL)
// - getAllCategories()
// - getProductsByFamily()
// - getProductBySlug()
// - searchProducts()
```

**File:** `src/data/products.json` or `src/data/products.ts`
```typescript
// Seed data for initial 50-100 SKUs across all families
// Include: UNP profiles, HEA profiles, steel plates, pipes, fasteners
```

#### 2.2 Catalog Pages

**File:** `src/pages/Catalog.tsx`
- Main catalog listing page
- Breadcrumb navigation
- Category filter sidebar or top bar
- Product grid with pagination
- Applied filter chips
- Sort options (price, availability, name)

**File:** `src/pages/CategoryPage.tsx`
- Category-specific view (e.g., /profiles, /plates)
- Subfamily navigation
- Dynamic filtering based on category

**File:** `src/components/catalog/FilterPanel.tsx`
- Accordion-based filters:
  - Standard (EN 10025, EN 10219, DIN, ISO)
  - Grade (S235JR, S355JR, DC01, 304, 316L)
  - Dimensions (height, width, thickness ranges)
  - Finish (hot-rolled, galvanized, polished)
  - Availability (in stock, on order, backorder)
- Filter state management with URL sync
- Clear all filters action

**File:** `src/components/catalog/FilterChips.tsx`
- Display applied filters as removable chips
- Clear individual filters

**File:** `src/components/catalog/ProductGrid.tsx`
- Responsive grid layout
- Loading skeletons
- Empty state messaging

**File:** `src/components/catalog/ProductCard.tsx`
- Product image/icon
- Title and SKU
- Spec badges (grade, standard, dimensions)
- Indicative price range or "Request Quote"
- Stock badge (In Stock, On Order, Backorder)
- Estimated lead time
- "Add to Estimate" CTA

**File:** `src/components/catalog/Pagination.tsx`
- Page navigation
- Items per page selector
- Total results count

#### 2.3 Search Functionality

**File:** `src/components/search/SearchBar.tsx` (enhance existing Header search)
- Debounced search input
- Autosuggest dropdown
- Search by: product name, SKU, standard, grade, dimension

**File:** `src/components/search/SearchResults.tsx`
- Grouped results: Categories, Products, Keywords
- Keyboard navigation support

**File:** `src/hooks/useSearch.ts`
- Search state management
- Debounce logic
- TanStack Query integration

#### 2.4 Acceptance Criteria
- [ ] User can browse products by category
- [ ] Filters update product list in <300ms
- [ ] Applied filters display as removable chips
- [ ] Search autocomplete suggests relevant products
- [ ] Product cards show all required info (price, stock, specs)
- [ ] Pagination works correctly with filters applied
- [ ] URL reflects active filters and page (shareable links)

---

### Phase 3: Product Detail Page (PDP) & Configuration
**Timeline:** 2 weeks
**Goal:** Enable detailed product viewing and specification configuration

#### 3.1 Product Detail Page

**File:** `src/pages/ProductDetail.tsx`
- Product hero image/icon
- Title, SKU, producer
- Breadcrumb navigation
- Availability badge
- Estimated delivery date/window
- Add to Estimate CTA
- Related products section

**File:** `src/components/pdp/SpecTable.tsx`
- Comprehensive spec table:
  - Dimensions (height, width, thickness, length)
  - Steel grade and chemical composition
  - Mechanical properties
  - Standards compliance (EN, DIN, ISO)
  - Tolerances
  - Surface finish options
- Downloadable datasheet links (PDF)

**File:** `src/components/pdp/ConfigurationPanel.tsx`
- **Base Selling Unit Selector:** m, kg, pcs, bundle
- **Length Options:** Dropdown for 6m, 12m, or custom
- **Quantity Input:** Number input with unit display
- **Finish Selector:** Radio group or select
- **Cut to Length:** Toggle + cut list input table
- Real-time weight calculation display
- Real-time gross estimate calculation

**File:** `src/components/pdp/CutListEditor.tsx`
- Table for entering cut list:
  - Length (m)
  - Quantity (pcs)
  - Auto-calculate waste %
- Import/Export CSV functionality

**File:** `src/components/pdp/WeightEstimator.tsx`
- Display estimated weight in kg
- Formula display (for transparency)
- Updates on configuration change

**File:** `src/components/pdp/PriceEstimator.tsx`
- Display gross estimate with disclaimer
- Indicative unit price √ó quantity
- Breakdown: subtotal, VAT (indicative), delivery fee band
- **Disclaimer banner:** "Pre»õurile afi»ôate sunt **estimative**. Oferta finalƒÉ este confirmatƒÉ de echipa de v√¢nzƒÉri."

**File:** `src/components/pdp/DeliveryCue.tsx`
- Delivery window (e.g., "3-5 zile lucrƒÉtoare")
- Estimated delivery date
- Delivery fee band or "Calculated at quote"
- Special transport notice for heavy orders

**File:** `src/hooks/useProductConfig.ts`
- State management for product configuration
- Weight and price calculation logic
- Validation rules

#### 3.2 Acceptance Criteria
- [ ] PDP displays full spec table with downloadable docs
- [ ] Changing dimension/length updates weight and price in <150ms
- [ ] Cut to length functionality works with waste calculation
- [ ] Gross estimate disclaimer is visible and clear
- [ ] Add to Estimate adds configured product to cart
- [ ] Stock and delivery info is accurate and clear

---

### Phase 4: Estimate Cart & RFQ Flow
**Timeline:** 2-3 weeks
**Goal:** Build the estimate cart and RFQ submission system

#### 4.1 Estimate Cart State Management

**File:** `src/context/CartContext.tsx` or use TanStack Query + localStorage
- Cart state: lines, totals, disclaimers
- Actions: add, update, remove line items
- Persist to localStorage
- Clear cart on RFQ submission

**File:** `src/types/cart.ts`
```typescript
// CartLine, EstimateCart interfaces
// Totals calculation types
```

#### 4.2 Estimate Cart UI

**File:** `src/components/cart/EstimateCartDrawer.tsx`
- Slide-out drawer (Sheet component)
- Triggered from Header cart button
- Line items list
- Totals panel
- "Request Final Quote" CTA

**File:** `src/components/cart/EstimateCartPage.tsx`
- Full-page cart view
- Editable line items
- Remove item action
- Continue shopping CTA
- Proceed to RFQ CTA

**File:** `src/components/cart/CartLineItem.tsx`
- Product thumbnail and title
- Specs summary (grade, dimension, length, finish)
- Quantity input (editable inline)
- Unit selector
- Estimated weight display
- Indicative unit price and line subtotal
- Remove button

**File:** `src/components/cart/TotalsPanel.tsx`
- Subtotal (all line items)
- Estimated total weight (kg)
- VAT (indicative) - e.g., 19%
- Delivery fee band or "TBD by sales"
- **Grand Total (Gross Estimate)**
- Disclaimer checkbox: "I understand these are gross estimates"

#### 4.3 RFQ Form Flow

**File:** `src/pages/RFQForm.tsx`
- Multi-step form:
  1. Company Information
  2. Delivery Address
  3. Preferences & Incoterms
  4. Attachments & Notes
  5. Review & Submit

**File:** `src/components/rfq/CompanyInfoStep.tsx`
- Legal name (required)
- CUI/VAT number (required, validated format)
- Billing address (street, city, county, postal code, country)
- Contact person (required)
- Phone (required)
- Email (required)
- Business verification status display (if logged in)

**File:** `src/components/rfq/DeliveryAddressStep.tsx`
- Delivery address fields
- "Same as billing" checkbox
- Desired delivery date picker

**File:** `src/components/rfq/PreferencesStep.tsx`
- Incoterm selector (EXW, FCA, CPT, DAP, DDP)
- Payment terms preferences (informational)
- Special requirements textarea

**File:** `src/components/rfq/AttachmentsStep.tsx`
- File upload (CSV, XLSX, PDF, images)
- Cut list upload
- Technical drawings upload
- Notes textarea

**File:** `src/components/rfq/ReviewStep.tsx`
- Summary of company info
- Summary of delivery details
- Cart snapshot with totals
- Attachments list
- Final disclaimers
- Submit button

**File:** `src/components/rfq/ConfirmationScreen.tsx`
- Thank you message
- RFQ reference number
- Sales contact details
- Support hours
- "Return to Homepage" CTA
- Email confirmation sent notice

**File:** `src/lib/api/rfq.ts`
```typescript
// submitRFQ(data: RFQ) => POST to /api/rfq
// Send email to user and sales team
// Generate RFQ reference ID
```

#### 4.4 Acceptance Criteria
- [ ] Cart persists across sessions (localStorage)
- [ ] Line items are editable inline
- [ ] Totals update correctly on quantity/unit change
- [ ] RFQ form validates all required fields
- [ ] CUI/VAT validation works correctly
- [ ] File upload supports CSV, XLSX, PDF
- [ ] Submission creates qualified lead
- [ ] User and sales receive email confirmation
- [ ] Confirmation screen shows sales contact info

---

### Phase 5: BOM Upload & Auto-Mapping
**Timeline:** 2 weeks
**Goal:** Enable bulk product upload via CSV/XLSX

#### 5.1 BOM Upload Flow

**File:** `src/pages/BOMUpload.tsx`
- Drag & drop zone
- Template download link
- Upload button
- File format instructions

**File:** `src/components/bom/UploadDropzone.tsx`
- Drag & drop zone (react-dropzone or native)
- Accepted file types: CSV, XLSX
- File size limit: 10MB
- Preview uploaded file name

**File:** `src/components/bom/BOMMapper.tsx`
- Parse uploaded file
- Display preview table
- Auto-map columns to expected fields:
  - family, standard, grade, dimension, length_m, qty, unit, finish, notes
- Show matching confidence for each row
- Unmatched rows highlighted

**File:** `src/components/bom/UnmatchedRowMapper.tsx`
- Manual mapping UI for unmatched rows
- Family selector ‚Üí filters spec ‚Üí product selector
- Confirm mapped product

**File:** `src/lib/utils/bomParser.ts`
```typescript
// parseBOM(file: File) => BOMRow[]
// Auto-match rows to product SKUs
// Return match confidence scores
```

**File:** `src/lib/utils/csvExport.ts`
```typescript
// exportCartToCSV(cart: EstimateCart) => download CSV
// exportBOMTemplate() => download template
```

#### 5.2 Acceptance Criteria
- [ ] User can upload CSV/XLSX with BOM data
- [ ] System auto-maps 80%+ of standard formats
- [ ] Unmatched rows can be manually mapped
- [ ] Mapped products added to cart in bulk
- [ ] Validation errors shown for malformed files
- [ ] Downloadable CSV template provided

---

### Phase 6: Optional User Accounts & B2B Benefits
**Timeline:** 2-3 weeks
**Goal:** Add optional authentication for enhanced user convenience

> **IMPORTANT:** Authentication is 100% OPTIONAL. All core features (catalog browsing, product configuration, cart, RFQ submission, BOM upload) must work without requiring an account. Accounts offer convenience features only.

#### 6.0 Guest vs. Registered User Matrix

| Feature | Guest User | Registered User |
|---------|-----------|----------------|
| Browse catalog | ‚úÖ Full access | ‚úÖ Full access |
| Search products | ‚úÖ Full access | ‚úÖ Full access |
| Configure products | ‚úÖ Full access | ‚úÖ Full access |
| Add to cart | ‚úÖ Full access | ‚úÖ Full access |
| Submit RFQ | ‚úÖ Full access | ‚úÖ **Pre-filled company data** |
| Upload BOM | ‚úÖ Full access | ‚úÖ **+ Save as project** |
| View order history | ‚ùå Not available | ‚úÖ Available |
| Save projects | ‚ùå Not available | ‚úÖ Available |
| Saved addresses | ‚ùå Not available | ‚úÖ Available |
| Business verification badge | ‚ùå Not available | ‚úÖ Optional |

#### 6.1 Authentication System (Optional)

**File:** `src/context/AuthContext.tsx`
- Auth state management with **guest support**
- `user: User | null` - null indicates guest user
- `isGuest: boolean` - helper to check guest status
- Login, logout, signup actions
- JWT token storage and refresh (if using backend auth)
- Protected route wrapper (ONLY for `/account/*` routes)

```typescript
interface AuthContextType {
  user: User | null; // null = guest user
  isAuthenticated: boolean; // false = guest
  isGuest: boolean; // true when user === null
  isLoading: boolean;

  // Optional actions
  login: (email: string, password: string) => Promise<void>;
  signup: (userData: SignupData) => Promise<void>;
  logout: () => void;

  // Helper for upselling
  promptSignup: (context: 'bom_save' | 'rfq_success' | 'order_history') => void;
}
```

**File:** `src/pages/Login.tsx`
- Email/password login
- "Continue as guest" prominent option
- "Forgot password" link
- SSO options (Google, Microsoft) - optional, future enhancement
- Clear value proposition: "Save projects, track orders, faster checkout"

**File:** `src/pages/Signup.tsx`
- Company signup form
- Business account (default) vs. Individual toggle
- CUI/VAT validation (optional field, validates if provided)
- Email verification flow (sent, but NOT blocking)
- **Guest escape hatch:** "Skip for now" button visible

**File:** `src/pages/ForgotPassword.tsx`
- Email input for password reset
- Confirmation screen

**File:** `src/lib/api/auth.ts`
```typescript
// login(email, password) - returns User object
// signup(userData) - creates account, returns User
// logout() - clears session
// refreshToken() - extends session (if using JWT)
// requestPasswordReset(email) - sends reset email
// checkEmailAvailability(email) - validation helper
```

#### 6.2 B2B Account Features (Require Authentication)

**File:** `src/pages/Account.tsx`
- **Protected route** - redirects to `/login` if guest
- Account dashboard with tabs:
  - Profile
  - Company Info
  - Saved Projects (BOM uploads)
  - Order History (past RFQs)
  - Saved Addresses
  - Preferences (optional, future)

**File:** `src/components/account/ProfileTab.tsx`
- User profile editing (name, email, phone)
- Contact information
- Password change
- Email verification status

**File:** `src/components/account/CompanyInfoTab.tsx`
- Company legal details (name, CUI, address, etc.)
- CUI/VAT validation status
- Business verification badge (if verified)
- Link to verification flow

**File:** `src/components/account/SavedProjectsTab.tsx`
- List of saved BOM projects
- Preview project details (products, quantities)
- "Load into cart" action
- "Duplicate project" action
- Delete project

**File:** `src/components/account/OrderHistoryTab.tsx`
- List of past RFQs with status:
  - `submitted` - sent to sales team
  - `acknowledged` - sales team reviewing
  - `in_progress` - preparing quote
  - `quoted` - quote sent to customer
  - `completed` - order fulfilled (future)
- "Reorder" action (loads RFQ items into cart)
- RFQ details modal (company info, products, notes)

**File:** `src/components/account/AddressesTab.tsx`
- Saved billing and delivery addresses
- Add/edit/delete addresses
- Set default billing/delivery address
- Address used to prefill RFQ form

#### 6.3 Business Verification Flow (Optional Enhancement)

> **NOTE:** This can be deferred to Phase 6C if backend admin panel is not ready.

**File:** `src/components/account/BusinessVerification.tsx`
- Upload verification documents (CUI certificate, trade registry extract)
- Verification status display:
  - `not_submitted` - no documents uploaded
  - `pending` - under review by admin
  - `verified` - approved, shows badge
  - `rejected` - need to re-submit
- Manual review by admin (requires backend)

**File:** `src/lib/api/verification.ts`
```typescript
// submitVerificationDocs(docs: File[]) - upload documents
// getVerificationStatus() - returns VerificationStatus
// Optional: adminApproveVerification(userId) - backend only
```

#### 6.4 Guest User Flow Enhancements

**File:** `src/components/common/SignupPrompt.tsx`
- Reusable component for gentle signup prompts
- Used after:
  - First successful RFQ submission: "Track this order? Sign up to view order history"
  - BOM upload completion: "Save this BOM for later? Create an account"
  - Second RFQ submission: "Create account to save time on future orders"
- "Maybe later" option always visible

**File:** `src/components/rfq/CompanyInfoStep.tsx` (Enhancement)
```typescript
// If logged in and verified
if (user && user.company) {
  // Prefill company data from user.company
  // Show: "Using saved company info (Edit)"
}

// If guest
if (!user) {
  // Show empty form (current behavior)
  // Show hint: "Have an account? Log in to prefill"
}
```

**File:** `src/components/bom/BOMMapper.tsx` (Enhancement)
```typescript
// Add "Save Project" button (disabled for guests)
if (isGuest) {
  <Button disabled>
    <Lock className="h-4 w-4" />
    Save Project (Sign up required)
  </Button>
} else {
  <Button onClick={saveProject}>
    Save Project
  </Button>
}
```

#### 6.5 Header Navigation Updates

**File:** `src/components/layout/Header.tsx`
```typescript
// Replace static "Login/Signup" with dynamic auth UI

// If guest
<Button variant="ghost" asChild>
  <Link to="/login">Cont</Link>
</Button>

// If authenticated
<DropdownMenu>
  <DropdownMenuTrigger>
    <Avatar>
      {user.company?.name.charAt(0) || user.name.charAt(0)}
    </Avatar>
  </DropdownMenuTrigger>
  <DropdownMenuContent>
    <DropdownMenuItem asChild>
      <Link to="/account">Contul Meu</Link>
    </DropdownMenuItem>
    <DropdownMenuItem asChild>
      <Link to="/account/projects">Proiecte Salvate</Link>
    </DropdownMenuItem>
    <DropdownMenuItem asChild>
      <Link to="/account/orders">Istoric Comenzi</Link>
    </DropdownMenuItem>
    <DropdownMenuSeparator />
    <DropdownMenuItem onClick={logout}>
      Deconectare
    </DropdownMenuItem>
  </DropdownMenuContent>
</DropdownMenu>
```

#### 6.6 Acceptance Criteria

**Guest User Flow (No Regression):**
- [ ] Guest users can browse full catalog without login prompt
- [ ] Guest users can add products to cart without account
- [ ] Guest users can submit RFQ without creating account
- [ ] Guest users can upload BOM files without account
- [ ] Guest users receive RFQ confirmation email (no account needed)

**Optional Account Features:**
- [ ] User can optionally sign up for business account
- [ ] Signup is quick and non-blocking (email verification sent but not required to use account)
- [ ] CUI/VAT validation works if user provides CUI (optional field)
- [ ] Logged-in users can save BOM uploads as projects
- [ ] RFQ form prefills company data for logged-in users (with option to edit)
- [ ] Logged-in users can view order history (past RFQs)
- [ ] Logged-in users can save multiple delivery addresses
- [ ] Business verification badge visible if user completes verification (optional)

**User Experience:**
- [ ] Signup prompts are gentle and skippable (never blocking)
- [ ] Value proposition is clear ("Save time on next order", not "Create account to continue")
- [ ] "Continue as guest" option always visible
- [ ] Logout returns user to guest state (no broken functionality)

---

### Phase 6C: Production-Ready Infrastructure & Backend Integration
**Timeline:** 4-6 weeks (to be implemented after Phases 2-5, 7-9)
**Priority:** CRITICAL - Required before production launch
**Goal:** Replace all mock implementations with production-ready backend infrastructure

> **IMPORTANT:** This phase has been **extracted into a separate document** for detailed planning.
>
> **See:** [`PRODUCTION_READINESS.md`](./PRODUCTION_READINESS.md) for complete implementation guide.
>
> **Implementation Decisions:**
> - **Infrastructure:** AWS Cloud (S3, RDS PostgreSQL, ElastiCache Redis)
> - **Strategy:** Phased Rollout (6 weeks, incremental migration)
> - **Email Service:** SendGrid
>
> **Implementation Order:**
> 1. Complete frontend Phases 2-5, 7-9 first (with localStorage mocks)
> 2. Then implement Phase 6C (replace all mocks with production backend)
> 3. Finally proceed to Phase 10 (Back-Office System)

---

#### 6C.1 Backend API Setup

**Tech Stack:**
- **Runtime:** Node.js 20 LTS
- **Framework:** Express.js 4.x with TypeScript
- **ORM:** Prisma 5.x
- **Database:** PostgreSQL 15+
- **Cache:** Redis 7+
- **Validation:** Zod (shared with frontend)

**File Structure:**
```
backend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.routes.ts        # Authentication endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users.routes.ts       # User management
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ products.routes.ts    # Product catalog API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cart.routes.ts        # Cart operations
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rfq.routes.ts         # RFQ submission & tracking
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ projects.routes.ts    # Saved BOM projects
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ addresses.routes.ts   # Saved addresses
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ upload.routes.ts      # File uploads (BOM, attachments)
‚îÇ   ‚îú‚îÄ‚îÄ controllers/
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.middleware.ts    # JWT validation
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rateLimit.middleware.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validation.middleware.ts
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma
‚îÇ   ‚îî‚îÄ‚îÄ migrations/
‚îú‚îÄ‚îÄ tests/
‚îú‚îÄ‚îÄ Dockerfile
‚îî‚îÄ‚îÄ docker-compose.yml
```

**API Endpoints:**
```typescript
// Authentication
POST   /api/auth/signup           # Create account
POST   /api/auth/login            # Login with email/password
POST   /api/auth/logout           # Invalidate session
POST   /api/auth/refresh          # Refresh JWT token
POST   /api/auth/reset-password   # Request password reset
POST   /api/auth/verify-email     # Email verification

// Users & Profiles
GET    /api/users/me              # Get current user profile
PATCH  /api/users/me              # Update profile
PATCH  /api/users/me/password     # Change password
PATCH  /api/users/me/company      # Update company info

// Products (Public - No Auth Required)
GET    /api/products              # List products with filters
GET    /api/products/:id          # Get product details
GET    /api/categories            # List categories

// Cart (Guest + Authenticated)
GET    /api/cart                  # Get cart (session-based for guests)
POST   /api/cart/items            # Add item to cart
PATCH  /api/cart/items/:id        # Update cart item
DELETE /api/cart/items/:id        # Remove cart item
DELETE /api/cart                  # Clear cart

// RFQ (Guest + Authenticated)
POST   /api/rfq                   # Submit RFQ
GET    /api/rfq/:id               # Get RFQ details
GET    /api/rfq                   # List user's RFQs (auth required)

// Projects (Authenticated Only)
GET    /api/projects              # List saved BOM projects
POST   /api/projects              # Create project
GET    /api/projects/:id          # Get project details
PATCH  /api/projects/:id          # Update project
DELETE /api/projects/:id          # Delete project

// Addresses (Authenticated Only)
GET    /api/addresses             # List saved addresses
POST   /api/addresses             # Create address
PATCH  /api/addresses/:id         # Update address
DELETE /api/addresses/:id         # Delete address

// File Uploads
POST   /api/upload/bom            # Upload BOM file
POST   /api/upload/attachment     # Upload RFQ attachment
```

---

#### 6C.2 Database Schema & Migration

**File:** `backend/prisma/schema.prisma`

```prisma
// Users & Authentication
model User {
  id            String    @id @default(uuid())
  email         String    @unique
  passwordHash  String
  name          String
  phone         String?
  role          UserRole  @default(BUSINESS)
  emailVerified Boolean   @default(false)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt

  company       Company?
  addresses     Address[]
  projects      Project[]
  rfqs          RFQ[]
  sessions      Session[]

  @@index([email])
}

enum UserRole {
  INDIVIDUAL
  BUSINESS
}

model Company {
  id          String   @id @default(uuid())
  userId      String   @unique
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  legalName   String
  cui         String?
  address     String?
  city        String?
  county      String?
  postalCode  String?
  country     String   @default("Romania")

  isVerified  Boolean  @default(false)
  verifiedAt  DateTime?

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([cui])
}

model Session {
  id           String   @id @default(uuid())
  userId       String
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  token        String   @unique
  refreshToken String?  @unique
  expiresAt    DateTime
  ipAddress    String?
  userAgent    String?

  createdAt    DateTime @default(now())

  @@index([token])
  @@index([userId])
}

// Products & Catalog
model Category {
  id          String    @id @default(uuid())
  slug        String    @unique
  name        String
  nameEn      String?
  description String?
  icon        String?
  sortOrder   Int       @default(0)

  products    Product[]

  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
}

model Product {
  id           String   @id @default(uuid())
  categoryId   String
  category     Category @relation(fields: [categoryId], references: [id])

  sku          String   @unique
  title        String
  grade        String?
  standard     String?
  dimensions   String?
  availability String   @default("in_stock")

  baseUnit     String   // kg, m, pcs
  pricePerUnit Float    // Gross estimate price

  weight       Float?   // kg per unit
  lengthM      Float?   // meters (for profiles, pipes)

  metadata     Json?    // Flexible for future specs

  isActive     Boolean  @default(true)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@index([categoryId])
  @@index([sku])
  @@index([availability])
}

// Cart (Session-based for guests, DB for authenticated)
model Cart {
  id        String     @id @default(uuid())
  userId    String?    // Null for guest carts
  sessionId String?    // For guest identification

  items     CartItem[]

  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt
  expiresAt DateTime   // Auto-cleanup old carts

  @@index([userId])
  @@index([sessionId])
}

model CartItem {
  id        String   @id @default(uuid())
  cartId    String
  cart      Cart     @relation(fields: [cartId], references: [id], onDelete: Cascade)

  productId String
  quantity  Float
  unit      String

  specs     Json?    // lengthM, finish, etc.

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([cartId])
}

// RFQs (Request for Quote)
model RFQ {
  id              String      @id @default(uuid())
  userId          String?     // Null for guest RFQs
  user            User?       @relation(fields: [userId], references: [id])

  referenceNumber String      @unique // RFQ-2025-00042
  status          RFQStatus   @default(SUBMITTED)

  // Company Info (snapshot at submission time)
  companyName     String
  cui             String?
  contactPerson   String
  email           String
  phone           String

  // Addresses
  billingAddress  Json
  deliveryAddress Json

  // Preferences
  incoterm        String?
  deliveryDate    DateTime?
  notes           String?

  // Attachments
  attachments     Attachment[]

  // Cart snapshot (preserved at submission)
  cartSnapshot    Json
  items           RFQItem[]

  // Pricing (filled by operator)
  estimatedTotal  Float?      // Gross estimate from frontend
  finalQuoteAmount Float?     // Final quote from operator
  finalQuotePdfUrl String?
  quotedAt        DateTime?

  // Timestamps
  submittedAt     DateTime    @default(now())
  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt

  @@index([userId])
  @@index([status])
  @@index([referenceNumber])
}

enum RFQStatus {
  SUBMITTED
  ACKNOWLEDGED
  IN_PROGRESS
  QUOTED
  COMPLETED
  CANCELLED
}

model RFQItem {
  id          String  @id @default(uuid())
  rfqId       String
  rfq         RFQ     @relation(fields: [rfqId], references: [id], onDelete: Cascade)

  productId   String?
  productSku  String
  productName String

  quantity    Float
  unit        String
  specs       Json?

  grossPrice  Float   // Estimate from frontend
  finalPrice  Float?  // Final price from operator

  createdAt   DateTime @default(now())

  @@index([rfqId])
}

// Saved BOM Projects
model Project {
  id          String   @id @default(uuid())
  userId      String
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  name        String
  description String?
  fileName    String

  bomData     Json     // BOMUploadResult structure

  lastUsedAt  DateTime?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([userId])
}

// Saved Addresses
model Address {
  id          String   @id @default(uuid())
  userId      String
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  type        AddressType
  isDefault   Boolean  @default(false)

  street      String
  city        String
  county      String
  postalCode  String
  country     String   @default("Romania")

  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([userId, type])
}

enum AddressType {
  BILLING
  DELIVERY
}

// File Attachments
model Attachment {
  id          String   @id @default(uuid())
  rfqId       String
  rfq         RFQ      @relation(fields: [rfqId], references: [id], onDelete: Cascade)

  fileName    String
  fileSize    Int
  mimeType    String
  storageUrl  String   // S3 URL or local path

  uploadedAt  DateTime @default(now())

  @@index([rfqId])
}
```

**Migration Plan:**
1. Run `npx prisma migrate dev --name init` to create initial schema
2. Seed database with product catalog from `src/data/products.ts`
3. Create migration script to import any existing localStorage data (if needed)

---

#### 6C.3 Production Authentication System

**Replace:** `src/lib/api/auth.ts` (currently localStorage mock)

**Backend Implementation:** `backend/src/services/auth.service.ts`

```typescript
import bcrypt from 'bcrypt';
import jwt from 'jsonwebtoken';
import { prisma } from '../config/database';

const SALT_ROUNDS = 12;
const JWT_SECRET = process.env.JWT_SECRET!;
const JWT_EXPIRES_IN = '24h';
const REFRESH_TOKEN_EXPIRES_IN = '7d';

export class AuthService {
  async signup(data: SignupData): Promise<AuthResponse> {
    // Validate email uniqueness
    const existingUser = await prisma.user.findUnique({
      where: { email: data.email.toLowerCase() }
    });

    if (existingUser) {
      throw new Error('Un cont cu acest email existƒÉ deja.');
    }

    // Validate CUI if provided
    if (data.company?.cui) {
      const cuiValidation = validateCUI(data.company.cui);
      if (!cuiValidation.valid) {
        throw new Error(cuiValidation.message || 'CUI invalid');
      }
    }

    // Hash password
    const passwordHash = await bcrypt.hash(data.password, SALT_ROUNDS);

    // Create user with company (if business account)
    const user = await prisma.user.create({
      data: {
        email: data.email.toLowerCase(),
        passwordHash,
        name: data.name,
        phone: data.phone,
        role: data.role,
        company: data.company ? {
          create: {
            legalName: data.company.name,
            cui: data.company.cui,
            address: data.company.address,
            city: data.company.city,
            county: data.company.county,
            postalCode: data.company.postalCode,
          }
        } : undefined,
      },
      include: { company: true }
    });

    // Generate JWT tokens
    const { accessToken, refreshToken } = this.generateTokens(user.id);

    // Save session
    await prisma.session.create({
      data: {
        userId: user.id,
        token: accessToken,
        refreshToken,
        expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000), // 7 days
      }
    });

    // Send verification email (async, don't block)
    this.sendVerificationEmail(user.email, user.id).catch(console.error);

    return {
      user: this.sanitizeUser(user),
      tokens: { accessToken, refreshToken }
    };
  }

  async login(email: string, password: string): Promise<AuthResponse> {
    const user = await prisma.user.findUnique({
      where: { email: email.toLowerCase() },
      include: { company: true }
    });

    if (!user) {
      throw new Error('Email sau parolƒÉ incorectƒÉ.');
    }

    // Verify password
    const isValidPassword = await bcrypt.compare(password, user.passwordHash);
    if (!isValidPassword) {
      throw new Error('Email sau parolƒÉ incorectƒÉ.');
    }

    // Generate tokens
    const { accessToken, refreshToken } = this.generateTokens(user.id);

    // Create session
    await prisma.session.create({
      data: {
        userId: user.id,
        token: accessToken,
        refreshToken,
        expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000),
      }
    });

    return {
      user: this.sanitizeUser(user),
      tokens: { accessToken, refreshToken }
    };
  }

  async logout(token: string): Promise<void> {
    await prisma.session.delete({
      where: { token }
    });
  }

  async refreshToken(oldRefreshToken: string): Promise<AuthResponse> {
    const session = await prisma.session.findUnique({
      where: { refreshToken: oldRefreshToken },
      include: { user: { include: { company: true } } }
    });

    if (!session || session.expiresAt < new Date()) {
      throw new Error('Invalid or expired refresh token');
    }

    // Generate new tokens
    const { accessToken, refreshToken } = this.generateTokens(session.userId);

    // Update session
    await prisma.session.update({
      where: { id: session.id },
      data: {
        token: accessToken,
        refreshToken,
        expiresAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000),
      }
    });

    return {
      user: this.sanitizeUser(session.user),
      tokens: { accessToken, refreshToken }
    };
  }

  private generateTokens(userId: string) {
    const accessToken = jwt.sign({ userId }, JWT_SECRET, {
      expiresIn: JWT_EXPIRES_IN
    });

    const refreshToken = jwt.sign({ userId, type: 'refresh' }, JWT_SECRET, {
      expiresIn: REFRESH_TOKEN_EXPIRES_IN
    });

    return { accessToken, refreshToken };
  }

  private sanitizeUser(user: any) {
    const { passwordHash, ...sanitized } = user;
    return sanitized;
  }

  private async sendVerificationEmail(email: string, userId: string) {
    // TODO: Implement email service
    console.log(`Verification email sent to ${email}`);
  }
}
```

**Frontend Migration:**

Update `src/context/AuthContext.tsx` to use real API instead of localStorage:

```typescript
import axios from 'axios';

const api = axios.create({
  baseURL: import.meta.env.VITE_API_URL || 'http://localhost:3000/api',
  withCredentials: true
});

export function AuthProvider({ children }: { children: React.ReactNode }) {
  const [user, setUser] = useState<User | null>(null);
  const [isLoading, setIsLoading] = useState(true);

  useEffect(() => {
    // Check for existing session on mount
    const token = localStorage.getItem('accessToken');
    if (token) {
      api.defaults.headers.common['Authorization'] = `Bearer ${token}`;
      fetchCurrentUser();
    } else {
      setIsLoading(false);
    }
  }, []);

  const fetchCurrentUser = async () => {
    try {
      const { data } = await api.get('/users/me');
      setUser(data);
    } catch (error) {
      localStorage.removeItem('accessToken');
      localStorage.removeItem('refreshToken');
      delete api.defaults.headers.common['Authorization'];
    } finally {
      setIsLoading(false);
    }
  };

  const signup = async (userData: SignupData) => {
    const { data } = await api.post('/auth/signup', userData);
    localStorage.setItem('accessToken', data.tokens.accessToken);
    localStorage.setItem('refreshToken', data.tokens.refreshToken);
    api.defaults.headers.common['Authorization'] = `Bearer ${data.tokens.accessToken}`;
    setUser(data.user);
  };

  const login = async (email: string, password: string) => {
    const { data } = await api.post('/auth/login', { email, password });
    localStorage.setItem('accessToken', data.tokens.accessToken);
    localStorage.setItem('refreshToken', data.tokens.refreshToken);
    api.defaults.headers.common['Authorization'] = `Bearer ${data.tokens.accessToken}`;
    setUser(data.user);
  };

  const logout = async () => {
    const token = localStorage.getItem('accessToken');
    if (token) {
      await api.post('/auth/logout', { token });
    }
    localStorage.removeItem('accessToken');
    localStorage.removeItem('refreshToken');
    delete api.defaults.headers.common['Authorization'];
    setUser(null);
  };

  // ... rest of context
}
```

---

#### 6C.4 File Upload & Storage (S3 Integration)

**Replace:** Mock BOM upload with real cloud storage

**Backend Setup:** `backend/src/services/upload.service.ts`

```typescript
import { S3Client, PutObjectCommand } from '@aws-sdk/client-s3';
import { getSignedUrl } from '@aws-sdk/s3-request-presigner';
import multer from 'multer';
import { v4 as uuidv4 } from 'uuid';

const s3Client = new S3Client({
  region: process.env.AWS_REGION!,
  credentials: {
    accessKeyId: process.env.AWS_ACCESS_KEY_ID!,
    secretAccessKey: process.env.AWS_SECRET_ACCESS_KEY!,
  }
});

const BUCKET_NAME = process.env.S3_BUCKET_NAME!;

export class UploadService {
  async uploadBOM(file: Express.Multer.File, userId?: string): Promise<string> {
    const fileKey = `bom-uploads/${userId || 'guest'}/${uuidv4()}-${file.originalname}`;

    const command = new PutObjectCommand({
      Bucket: BUCKET_NAME,
      Key: fileKey,
      Body: file.buffer,
      ContentType: file.mimetype,
      Metadata: {
        uploadedBy: userId || 'guest',
        originalName: file.originalname
      }
    });

    await s3Client.send(command);

    return `https://${BUCKET_NAME}.s3.${process.env.AWS_REGION}.amazonaws.com/${fileKey}`;
  }

  async uploadAttachment(file: Express.Multer.File, rfqId: string): Promise<string> {
    const fileKey = `rfq-attachments/${rfqId}/${uuidv4()}-${file.originalname}`;

    const command = new PutObjectCommand({
      Bucket: BUCKET_NAME,
      Key: fileKey,
      Body: file.buffer,
      ContentType: file.mimetype,
    });

    await s3Client.send(command);

    return `https://${BUCKET_NAME}.s3.${process.env.AWS_REGION}.amazonaws.com/${fileKey}`;
  }

  async getSignedDownloadUrl(fileKey: string): Promise<string> {
    const command = new GetObjectCommand({
      Bucket: BUCKET_NAME,
      Key: fileKey,
    });

    return await getSignedUrl(s3Client, command, { expiresIn: 3600 }); // 1 hour
  }
}
```

**Alternative (Self-Hosted):** Use MinIO for on-premises S3-compatible storage:

```yaml
# docker-compose.yml
services:
  minio:
    image: minio/minio:latest
    ports:
      - "9000:9000"
      - "9001:9001"
    environment:
      MINIO_ROOT_USER: minioadmin
      MINIO_ROOT_PASSWORD: minioadmin
    command: server /data --console-address ":9001"
    volumes:
      - minio_data:/data

volumes:
  minio_data:
```

---

#### 6C.5 Email Service Integration

**Replace:** `console.log` with real email sending

**Backend Setup:** `backend/src/services/email.service.ts`

```typescript
import sgMail from '@sendgrid/mail';
import { RFQ, User } from '@prisma/client';

sgMail.setApiKey(process.env.SENDGRID_API_KEY!);

const FROM_EMAIL = process.env.FROM_EMAIL || 'noreply@metalpro.ro';
const OPERATOR_EMAIL = process.env.OPERATOR_EMAIL || 'sales@metalpro.ro';

export class EmailService {
  async sendRFQConfirmation(rfq: RFQ, user?: User): Promise<void> {
    const msg = {
      to: rfq.email,
      from: FROM_EMAIL,
      subject: `Confirmare RFQ ${rfq.referenceNumber} - MetalPro`,
      html: `
        <h1>Cerere OfertƒÉ PrimitƒÉ</h1>
        <p>BunƒÉ ${rfq.contactPerson},</p>
        <p>Am primit cererea ta de ofertƒÉ cu referin»õa <strong>${rfq.referenceNumber}</strong>.</p>
        <p>Echipa noastrƒÉ de v√¢nzƒÉri va analiza solicitarea »ôi va reveni cu o ofertƒÉ detaliatƒÉ √Æn cel mai scurt timp.</p>

        <h2>Detalii ComandƒÉ:</h2>
        <ul>
          <li>Companie: ${rfq.companyName}</li>
          <li>Total estimat: ${rfq.estimatedTotal ? `${rfq.estimatedTotal.toFixed(2)} RON` : 'Se calculeazƒÉ'}</li>
          <li>Data doritƒÉ livrare: ${rfq.deliveryDate || 'Nu a fost specificatƒÉ'}</li>
        </ul>

        <p>Po»õi urmƒÉri statusul comenzii √Æn contul tƒÉu: <a href="${process.env.FRONTEND_URL}/account/orders">Vezi Istoric Comenzi</a></p>

        <p>Cu stimƒÉ,<br/>Echipa MetalPro</p>
      `
    };

    await sgMail.send(msg);
  }

  async notifyOperatorNewRFQ(rfq: RFQ): Promise<void> {
    const msg = {
      to: OPERATOR_EMAIL,
      from: FROM_EMAIL,
      subject: `[NOU] RFQ ${rfq.referenceNumber} de la ${rfq.companyName}`,
      html: `
        <h1>RFQ Nou Primit</h1>
        <p><strong>Referin»õƒÉ:</strong> ${rfq.referenceNumber}</p>
        <p><strong>Companie:</strong> ${rfq.companyName} (CUI: ${rfq.cui || 'N/A'})</p>
        <p><strong>Contact:</strong> ${rfq.contactPerson} - ${rfq.email} - ${rfq.phone}</p>
        <p><strong>Total estimat:</strong> ${rfq.estimatedTotal?.toFixed(2)} RON</p>

        <p><a href="${process.env.BACKOFFICE_URL}/rfq/${rfq.id}">Vezi Detalii RFQ ‚Üí</a></p>
      `
    };

    await sgMail.send(msg);
  }

  async sendQuoteReady(rfq: RFQ, pdfUrl: string): Promise<void> {
    const msg = {
      to: rfq.email,
      from: FROM_EMAIL,
      subject: `OfertƒÉ PregƒÉtitƒÉ - ${rfq.referenceNumber}`,
      html: `
        <h1>Oferta Ta Este Gata!</h1>
        <p>BunƒÉ ${rfq.contactPerson},</p>
        <p>Am pregƒÉtit oferta pentru cererea ta cu referin»õa <strong>${rfq.referenceNumber}</strong>.</p>
        <p><strong>Valoare totalƒÉ:</strong> ${rfq.finalQuoteAmount?.toFixed(2)} RON (inclusiv TVA)</p>

        <p>DescarcƒÉ oferta detaliatƒÉ: <a href="${pdfUrl}">DescarcƒÉ PDF</a></p>

        <p>Pentru detalii sau modificƒÉri, te rugƒÉm sƒÉ ne contactezi telefonic sau sƒÉ rƒÉspunzi acestui email.</p>

        <p>Cu stimƒÉ,<br/>Echipa MetalPro</p>
      `,
      attachments: [
        {
          filename: `Oferta-${rfq.referenceNumber}.pdf`,
          path: pdfUrl,
        }
      ]
    };

    await sgMail.send(msg);
  }

  async sendVerificationEmail(email: string, userId: string): Promise<void> {
    const verificationToken = jwt.sign({ userId, type: 'email_verification' }, JWT_SECRET, {
      expiresIn: '24h'
    });

    const verificationUrl = `${process.env.FRONTEND_URL}/verify-email?token=${verificationToken}`;

    const msg = {
      to: email,
      from: FROM_EMAIL,
      subject: 'VerificƒÉ adresa de email - MetalPro',
      html: `
        <h1>Bine ai venit la MetalPro!</h1>
        <p>Te rugƒÉm sƒÉ verifici adresa de email fƒÉc√¢nd clic pe butonul de mai jos:</p>
        <p><a href="${verificationUrl}" style="background-color: #0066cc; color: white; padding: 12px 24px; text-decoration: none; border-radius: 4px; display: inline-block;">VerificƒÉ Email</a></p>
        <p>Linkul este valabil 24 de ore.</p>
        <p>DacƒÉ nu ai creat un cont pe MetalPro, te rugƒÉm sƒÉ ignori acest email.</p>
      `
    };

    await sgMail.send(msg);
  }

  async sendPasswordResetEmail(email: string, resetToken: string): Promise<void> {
    const resetUrl = `${process.env.FRONTEND_URL}/reset-password?token=${resetToken}`;

    const msg = {
      to: email,
      from: FROM_EMAIL,
      subject: 'Resetare ParolƒÉ - MetalPro',
      html: `
        <h1>Resetare ParolƒÉ</h1>
        <p>Am primit o solicitare de resetare a parolei pentru contul tƒÉu.</p>
        <p>DacƒÉ tu ai fƒÉcut aceastƒÉ solicitare, fƒÉ clic pe butonul de mai jos pentru a seta o parolƒÉ nouƒÉ:</p>
        <p><a href="${resetUrl}" style="background-color: #0066cc; color: white; padding: 12px 24px; text-decoration: none; border-radius: 4px; display: inline-block;">ReseteazƒÉ Parola</a></p>
        <p>Linkul este valabil 1 orƒÉ.</p>
        <p>DacƒÉ nu ai solicitat resetarea parolei, te rugƒÉm sƒÉ ignori acest email. Parola ta va rƒÉm√¢ne neschimbatƒÉ.</p>
      `
    };

    await sgMail.send(msg);
  }
}
```

**Environment Variables:**
```bash
# .env
SENDGRID_API_KEY=SG.xxxxxxxxxxxxxxxxxxxxxxxxxxxxx
FROM_EMAIL=noreply@metalpro.ro
OPERATOR_EMAIL=sales@metalpro.ro
FRONTEND_URL=https://metalpro.ro
BACKOFFICE_URL=https://admin.metalpro.ro
```

**Alternative Email Services:**
- **AWS SES** (cheaper for high volume)
- **Postmark** (excellent deliverability)
- **Mailgun** (robust API)
- **Self-hosted SMTP** (on-premises option)

---

#### 6C.6 Security Hardening

**6C.6.1 Authentication Middleware**

`backend/src/middleware/auth.middleware.ts`:
```typescript
import jwt from 'jsonwebtoken';
import { Request, Response, NextFunction } from 'express';
import { prisma } from '../config/database';

export interface AuthRequest extends Request {
  user?: User;
  session?: Session;
}

export async function authenticate(
  req: AuthRequest,
  res: Response,
  next: NextFunction
) {
  try {
    const authHeader = req.headers.authorization;
    if (!authHeader || !authHeader.startsWith('Bearer ')) {
      return res.status(401).json({ error: 'Unauthorized' });
    }

    const token = authHeader.substring(7);
    const decoded = jwt.verify(token, process.env.JWT_SECRET!) as { userId: string };

    // Verify session exists and is not expired
    const session = await prisma.session.findUnique({
      where: { token },
      include: { user: { include: { company: true } } }
    });

    if (!session || session.expiresAt < new Date()) {
      return res.status(401).json({ error: 'Session expired' });
    }

    req.user = session.user;
    req.session = session;
    next();
  } catch (error) {
    return res.status(401).json({ error: 'Invalid token' });
  }
}

// Optional authentication - doesn't fail if no token
export async function optionalAuth(
  req: AuthRequest,
  res: Response,
  next: NextFunction
) {
  try {
    const authHeader = req.headers.authorization;
    if (authHeader && authHeader.startsWith('Bearer ')) {
      const token = authHeader.substring(7);
      const decoded = jwt.verify(token, process.env.JWT_SECRET!) as { userId: string };

      const session = await prisma.session.findUnique({
        where: { token },
        include: { user: { include: { company: true } } }
      });

      if (session && session.expiresAt >= new Date()) {
        req.user = session.user;
        req.session = session;
      }
    }
  } catch (error) {
    // Ignore auth errors for optional auth
  }
  next();
}
```

**6C.6.2 Rate Limiting**

`backend/src/middleware/rateLimit.middleware.ts`:
```typescript
import rateLimit from 'express-rate-limit';
import RedisStore from 'rate-limit-redis';
import { createClient } from 'redis';

const redisClient = createClient({
  url: process.env.REDIS_URL || 'redis://localhost:6379'
});
redisClient.connect();

// General API rate limiting
export const apiLimiter = rateLimit({
  store: new RedisStore({
    client: redisClient,
    prefix: 'rl:api:',
  }),
  windowMs: 15 * 60 * 1000, // 15 minutes
  max: 100, // 100 requests per 15 minutes
  message: 'Prea multe cereri. Te rugƒÉm sƒÉ √Æncerci mai t√¢rziu.',
  standardHeaders: true,
  legacyHeaders: false,
});

// Strict rate limiting for authentication endpoints
export const authLimiter = rateLimit({
  store: new RedisStore({
    client: redisClient,
    prefix: 'rl:auth:',
  }),
  windowMs: 15 * 60 * 1000, // 15 minutes
  max: 5, // 5 attempts per 15 minutes
  message: 'Prea multe √ÆncercƒÉri de autentificare. Te rugƒÉm sƒÉ √Æncerci mai t√¢rziu.',
  skipSuccessfulRequests: true, // Don't count successful logins
});

// RFQ submission rate limiting (prevent spam)
export const rfqLimiter = rateLimit({
  store: new RedisStore({
    client: redisClient,
    prefix: 'rl:rfq:',
  }),
  windowMs: 60 * 60 * 1000, // 1 hour
  max: 10, // 10 RFQs per hour per IP
  message: 'Prea multe cereri de ofertƒÉ. Te rugƒÉm sƒÉ √Æncerci mai t√¢rziu.',
});
```

**6C.6.3 CORS Configuration**

`backend/src/config/cors.ts`:
```typescript
import cors from 'cors';

export const corsOptions: cors.CorsOptions = {
  origin: function (origin, callback) {
    const allowedOrigins = [
      process.env.FRONTEND_URL || 'http://localhost:8080',
      'https://metalpro.ro',
      'https://www.metalpro.ro',
      'https://staging.metalpro.ro',
    ];

    // Allow requests with no origin (mobile apps, Postman, etc.)
    if (!origin) return callback(null, true);

    if (allowedOrigins.includes(origin)) {
      callback(null, true);
    } else {
      callback(new Error('Not allowed by CORS'));
    }
  },
  credentials: true, // Allow cookies
  methods: ['GET', 'POST', 'PUT', 'PATCH', 'DELETE', 'OPTIONS'],
  allowedHeaders: ['Content-Type', 'Authorization'],
  maxAge: 86400, // 24 hours
};
```

**6C.6.4 Input Validation & Sanitization**

`backend/src/middleware/validation.middleware.ts`:
```typescript
import { z } from 'zod';
import { Request, Response, NextFunction } from 'express';
import xss from 'xss';

// Sanitize all string inputs to prevent XSS
export function sanitizeInput(obj: any): any {
  if (typeof obj === 'string') {
    return xss(obj.trim());
  }
  if (Array.isArray(obj)) {
    return obj.map(sanitizeInput);
  }
  if (typeof obj === 'object' && obj !== null) {
    return Object.fromEntries(
      Object.entries(obj).map(([key, value]) => [key, sanitizeInput(value)])
    );
  }
  return obj;
}

export function validateBody(schema: z.ZodSchema) {
  return async (req: Request, res: Response, next: NextFunction) => {
    try {
      // Sanitize input first
      req.body = sanitizeInput(req.body);

      // Then validate with Zod
      req.body = await schema.parseAsync(req.body);
      next();
    } catch (error) {
      if (error instanceof z.ZodError) {
        return res.status(400).json({
          error: 'Validation error',
          details: error.errors
        });
      }
      next(error);
    }
  };
}
```

**6C.6.5 Security Headers**

`backend/src/index.ts`:
```typescript
import helmet from 'helmet';
import express from 'express';

const app = express();

// Security headers
app.use(helmet({
  contentSecurityPolicy: {
    directives: {
      defaultSrc: ["'self'"],
      styleSrc: ["'self'", "'unsafe-inline'"],
      scriptSrc: ["'self'"],
      imgSrc: ["'self'", "data:", "https:"],
    }
  },
  hsts: {
    maxAge: 31536000, // 1 year
    includeSubDomains: true,
    preload: true
  }
}));

// Prevent parameter pollution
import hpp from 'hpp';
app.use(hpp());

// SQL injection prevention (handled by Prisma ORM)
// XSS prevention (sanitizeInput middleware)
// CSRF protection (SameSite cookies + CSRF tokens for state-changing operations)
```

---

#### 6C.7 Production Deployment

**6C.7.1 Docker Configuration**

`Dockerfile` (Backend):
```dockerfile
FROM node:20-alpine AS builder

WORKDIR /app

# Copy package files
COPY package*.json ./
COPY prisma ./prisma/

# Install dependencies
RUN npm ci

# Copy source code
COPY . .

# Generate Prisma client
RUN npx prisma generate

# Build TypeScript
RUN npm run build

# Production stage
FROM node:20-alpine

WORKDIR /app

# Install production dependencies only
COPY package*.json ./
RUN npm ci --only=production

# Copy built files and Prisma schema
COPY --from=builder /app/dist ./dist
COPY --from=builder /app/prisma ./prisma
COPY --from=builder /app/node_modules/.prisma ./node_modules/.prisma

# Expose port
EXPOSE 3000

# Run migrations and start server
CMD ["sh", "-c", "npx prisma migrate deploy && node dist/index.js"]
```

`Dockerfile` (Frontend):
```dockerfile
FROM node:20-alpine AS builder

WORKDIR /app

COPY package*.json ./
RUN npm ci

COPY . .

# Build for production
RUN npm run build

# Production stage with nginx
FROM nginx:alpine

# Copy built files
COPY --from=builder /app/dist /usr/share/nginx/html

# Copy nginx configuration
COPY nginx.conf /etc/nginx/nginx.conf

EXPOSE 80

CMD ["nginx", "-g", "daemon off;"]
```

**6C.7.2 Docker Compose (Full Stack)**

`docker-compose.yml`:
```yaml
version: '3.8'

services:
  # PostgreSQL Database
  postgres:
    image: postgres:15-alpine
    environment:
      POSTGRES_DB: metalpro
      POSTGRES_USER: metalpro_user
      POSTGRES_PASSWORD: ${DB_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U metalpro_user"]
      interval: 10s
      timeout: 5s
      retries: 5

  # Redis Cache
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 10s
      timeout: 5s
      retries: 5

  # Backend API
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
    environment:
      NODE_ENV: production
      DATABASE_URL: postgresql://metalpro_user:${DB_PASSWORD}@postgres:5432/metalpro
      REDIS_URL: redis://redis:6379
      JWT_SECRET: ${JWT_SECRET}
      SENDGRID_API_KEY: ${SENDGRID_API_KEY}
      AWS_REGION: ${AWS_REGION}
      AWS_ACCESS_KEY_ID: ${AWS_ACCESS_KEY_ID}
      AWS_SECRET_ACCESS_KEY: ${AWS_SECRET_ACCESS_KEY}
      S3_BUCKET_NAME: ${S3_BUCKET_NAME}
    ports:
      - "3000:3000"
    depends_on:
      postgres:
        condition: service_healthy
      redis:
        condition: service_healthy
    restart: unless-stopped

  # Frontend (nginx)
  frontend:
    build:
      context: .
      dockerfile: Dockerfile
    environment:
      VITE_API_URL: https://api.metalpro.ro
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./ssl:/etc/nginx/ssl:ro  # SSL certificates
    depends_on:
      - backend
    restart: unless-stopped

  # nginx Reverse Proxy (optional - for API gateway)
  nginx-proxy:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro
      - ./ssl:/etc/nginx/ssl:ro
    depends_on:
      - backend
      - frontend
    restart: unless-stopped

volumes:
  postgres_data:
  redis_data:
```

**6C.7.3 nginx Reverse Proxy Configuration**

`nginx/nginx.conf`:
```nginx
upstream backend {
    server backend:3000;
}

upstream frontend {
    server frontend:80;
}

# HTTP to HTTPS redirect
server {
    listen 80;
    server_name metalpro.ro www.metalpro.ro;

    location /.well-known/acme-challenge/ {
        root /var/www/certbot;
    }

    location / {
        return 301 https://$host$request_uri;
    }
}

# HTTPS - Frontend
server {
    listen 443 ssl http2;
    server_name metalpro.ro www.metalpro.ro;

    ssl_certificate /etc/nginx/ssl/fullchain.pem;
    ssl_certificate_key /etc/nginx/ssl/privkey.pem;
    ssl_protocols TLSv1.2 TLSv1.3;
    ssl_ciphers HIGH:!aNULL:!MD5;
    ssl_prefer_server_ciphers on;

    # Security headers
    add_header Strict-Transport-Security "max-age=31536000; includeSubDomains; preload" always;
    add_header X-Frame-Options "SAMEORIGIN" always;
    add_header X-Content-Type-Options "nosniff" always;
    add_header X-XSS-Protection "1; mode=block" always;

    # Gzip compression
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css text/xml text/javascript application/x-javascript application/javascript application/xml+rss application/json;

    # Frontend
    location / {
        proxy_pass http://frontend;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;

        # Cache static assets
        location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
            proxy_pass http://frontend;
            expires 1y;
            add_header Cache-Control "public, immutable";
        }
    }

    # Backend API
    location /api/ {
        proxy_pass http://backend;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;

        # CORS headers (if needed)
        add_header Access-Control-Allow-Origin "https://metalpro.ro" always;
        add_header Access-Control-Allow-Methods "GET, POST, PUT, PATCH, DELETE, OPTIONS" always;
        add_header Access-Control-Allow-Headers "Authorization, Content-Type" always;
        add_header Access-Control-Allow-Credentials "true" always;

        # Handle preflight requests
        if ($request_method = 'OPTIONS') {
            return 204;
        }

        # Timeouts
        proxy_connect_timeout 60s;
        proxy_send_timeout 60s;
        proxy_read_timeout 60s;

        # File upload size limit
        client_max_body_size 50M;
    }
}

# HTTPS - API subdomain (optional)
server {
    listen 443 ssl http2;
    server_name api.metalpro.ro;

    ssl_certificate /etc/nginx/ssl/fullchain.pem;
    ssl_certificate_key /etc/nginx/ssl/privkey.pem;

    location / {
        proxy_pass http://backend;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;

        client_max_body_size 50M;
    }
}
```

**6C.7.4 Environment Variables (Production)**

`.env.production`:
```bash
# Database
DATABASE_URL=postgresql://metalpro_user:STRONG_PASSWORD@postgres:5432/metalpro

# Redis
REDIS_URL=redis://redis:6379

# JWT
JWT_SECRET=GENERATE_STRONG_RANDOM_SECRET_HERE_AT_LEAST_32_CHARS

# Email (SendGrid)
SENDGRID_API_KEY=SG.xxxxxxxxxxxxxxxxxxxxxxxxxxxxx
FROM_EMAIL=noreply@metalpro.ro
OPERATOR_EMAIL=sales@metalpro.ro

# AWS S3
AWS_REGION=eu-central-1
AWS_ACCESS_KEY_ID=AKIA...
AWS_SECRET_ACCESS_KEY=...
S3_BUCKET_NAME=metalpro-uploads

# URLs
FRONTEND_URL=https://metalpro.ro
BACKOFFICE_URL=https://admin.metalpro.ro
API_URL=https://api.metalpro.ro

# Monitoring
SENTRY_DSN=https://...@sentry.io/...

# Node
NODE_ENV=production
PORT=3000
```

**Security Note:** Use AWS Secrets Manager or HashiCorp Vault for production secrets.

---

#### 6C.8 Monitoring & Logging

**6C.8.1 Error Tracking (Sentry)**

`backend/src/config/sentry.ts`:
```typescript
import * as Sentry from '@sentry/node';
import { ProfilingIntegration } from '@sentry/profiling-node';

export function initSentry() {
  Sentry.init({
    dsn: process.env.SENTRY_DSN,
    environment: process.env.NODE_ENV || 'development',
    tracesSampleRate: 1.0, // 100% in production, adjust based on volume
    profilesSampleRate: 1.0,
    integrations: [
      new ProfilingIntegration(),
    ],
  });
}

// Error handler middleware
export function sentryErrorHandler(err: Error, req: Request, res: Response, next: NextFunction) {
  Sentry.captureException(err, {
    user: req.user ? { id: req.user.id, email: req.user.email } : undefined,
    tags: {
      path: req.path,
      method: req.method,
    },
  });

  // Don't expose internal errors to client
  if (process.env.NODE_ENV === 'production') {
    res.status(500).json({ error: 'Internal server error' });
  } else {
    res.status(500).json({ error: err.message, stack: err.stack });
  }
}
```

Frontend Sentry:
```typescript
// src/main.tsx
import * as Sentry from '@sentry/react';

Sentry.init({
  dsn: import.meta.env.VITE_SENTRY_DSN,
  environment: import.meta.env.MODE,
  integrations: [
    new Sentry.BrowserTracing({
      routingInstrumentation: Sentry.reactRouterV6Instrumentation(
        React.useEffect,
        useLocation,
        useNavigationType,
        createRoutesFromChildren,
        matchRoutes
      ),
    }),
    new Sentry.Replay(),
  ],
  tracesSampleRate: 1.0,
  replaysSessionSampleRate: 0.1,
  replaysOnErrorSampleRate: 1.0,
});
```

**6C.8.2 Application Logging**

`backend/src/config/logger.ts`:
```typescript
import winston from 'winston';

const logger = winston.createLogger({
  level: process.env.LOG_LEVEL || 'info',
  format: winston.format.combine(
    winston.format.timestamp(),
    winston.format.errors({ stack: true }),
    winston.format.json()
  ),
  defaultMeta: { service: 'metalpro-backend' },
  transports: [
    // Write all logs with level 'error' to error.log
    new winston.transports.File({ filename: 'logs/error.log', level: 'error' }),
    // Write all logs to combined.log
    new winston.transports.File({ filename: 'logs/combined.log' }),
  ],
});

// Console logging in development
if (process.env.NODE_ENV !== 'production') {
  logger.add(new winston.transports.Console({
    format: winston.format.combine(
      winston.format.colorize(),
      winston.format.simple()
    )
  }));
}

export default logger;
```

**6C.8.3 Request Logging**

```typescript
import morgan from 'morgan';
import logger from './config/logger';

// Morgan stream to winston
const stream = {
  write: (message: string) => logger.http(message.trim())
};

app.use(morgan('combined', { stream }));
```

**6C.8.4 Health Check Endpoints**

`backend/src/routes/health.routes.ts`:
```typescript
import { Router } from 'express';
import { prisma } from '../config/database';
import { createClient } from 'redis';

const router = Router();

router.get('/health', async (req, res) => {
  const health = {
    uptime: process.uptime(),
    timestamp: Date.now(),
    status: 'ok',
    checks: {
      database: 'unknown',
      redis: 'unknown',
    }
  };

  try {
    // Check database
    await prisma.$queryRaw`SELECT 1`;
    health.checks.database = 'ok';
  } catch (error) {
    health.checks.database = 'error';
    health.status = 'degraded';
  }

  try {
    // Check Redis
    const redis = createClient({ url: process.env.REDIS_URL });
    await redis.connect();
    await redis.ping();
    await redis.quit();
    health.checks.redis = 'ok';
  } catch (error) {
    health.checks.redis = 'error';
    health.status = 'degraded';
  }

  const statusCode = health.status === 'ok' ? 200 : 503;
  res.status(statusCode).json(health);
});

router.get('/health/ready', async (req, res) => {
  // Kubernetes readiness probe
  try {
    await prisma.$queryRaw`SELECT 1`;
    res.status(200).json({ status: 'ready' });
  } catch (error) {
    res.status(503).json({ status: 'not ready' });
  }
});

router.get('/health/live', (req, res) => {
  // Kubernetes liveness probe
  res.status(200).json({ status: 'alive' });
});

export default router;
```

---

#### 6C.9 CI/CD Pipeline

**GitHub Actions Workflow:**

`.github/workflows/deploy-production.yml`:
```yaml
name: Deploy to Production

on:
  push:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '20'
          cache: 'npm'

      - name: Install dependencies
        run: npm ci

      - name: Run linter
        run: npm run lint

      - name: Run type check
        run: npm run type-check

      - name: Run tests
        run: npm run test

      - name: Build frontend
        run: npm run build

  build-and-push:
    needs: test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      - name: Set up Docker Buildx
        uses: docker/setup-buildx-action@v2

      - name: Login to Docker Hub
        uses: docker/login-action@v2
        with:
          username: ${{ secrets.DOCKER_USERNAME }}
          password: ${{ secrets.DOCKER_PASSWORD }}

      - name: Build and push backend
        uses: docker/build-push-action@v4
        with:
          context: ./backend
          push: true
          tags: metalpro/backend:latest,metalpro/backend:${{ github.sha }}
          cache-from: type=registry,ref=metalpro/backend:buildcache
          cache-to: type=registry,ref=metalpro/backend:buildcache,mode=max

      - name: Build and push frontend
        uses: docker/build-push-action@v4
        with:
          context: .
          push: true
          tags: metalpro/frontend:latest,metalpro/frontend:${{ github.sha }}
          cache-from: type=registry,ref=metalpro/frontend:buildcache
          cache-to: type=registry,ref=metalpro/frontend:buildcache,mode=max

  deploy:
    needs: build-and-push
    runs-on: ubuntu-latest
    steps:
      - name: Deploy to production server
        uses: appleboy/ssh-action@master
        with:
          host: ${{ secrets.PROD_SERVER_HOST }}
          username: ${{ secrets.PROD_SERVER_USER }}
          key: ${{ secrets.PROD_SERVER_SSH_KEY }}
          script: |
            cd /opt/metalpro
            docker-compose pull
            docker-compose up -d --remove-orphans
            docker image prune -f
```

---

#### 6C.10 Performance Optimization

**6C.10.1 Database Indexing**

Add indexes to frequently queried columns:
```prisma
model User {
  id    String @id @default(uuid())
  email String @unique

  @@index([email])
}

model RFQ {
  id              String @id @default(uuid())
  userId          String?
  status          RFQStatus
  referenceNumber String @unique

  @@index([userId])
  @@index([status])
  @@index([referenceNumber])
}

model Product {
  id           String @id @default(uuid())
  categoryId   String
  sku          String @unique
  availability String

  @@index([categoryId])
  @@index([sku])
  @@index([availability])
}
```

**6C.10.2 Caching Strategy**

```typescript
// Cache product catalog in Redis (1 hour TTL)
async function getProducts(): Promise<Product[]> {
  const cacheKey = 'products:all';

  // Try cache first
  const cached = await redis.get(cacheKey);
  if (cached) {
    return JSON.parse(cached);
  }

  // Fallback to database
  const products = await prisma.product.findMany({
    where: { isActive: true },
    include: { category: true }
  });

  // Cache for 1 hour
  await redis.setex(cacheKey, 3600, JSON.stringify(products));

  return products;
}

// Invalidate cache on product update
async function updateProduct(id: string, data: UpdateProductDto): Promise<Product> {
  const product = await prisma.product.update({
    where: { id },
    data,
  });

  // Invalidate product catalog cache
  await redis.del('products:all');
  await redis.del(`product:${id}`);

  return product;
}
```

**6C.10.3 Database Connection Pooling**

```typescript
// prisma/schema.prisma
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")

  // Connection pooling
  pool_size    = 20
  pool_timeout = 30
}
```

**6C.10.4 API Response Compression**

```typescript
import compression from 'compression';

app.use(compression({
  level: 6, // Compression level (0-9)
  threshold: 1024, // Only compress responses > 1KB
  filter: (req, res) => {
    if (req.headers['x-no-compression']) {
      return false;
    }
    return compression.filter(req, res);
  }
}));
```

---

#### 6C.11 Testing Strategy

**6C.11.1 Backend Integration Tests**

`backend/tests/auth.test.ts`:
```typescript
import request from 'supertest';
import { app } from '../src/index';
import { prisma } from '../src/config/database';

describe('Authentication API', () => {
  beforeEach(async () => {
    // Clean database before each test
    await prisma.user.deleteMany({});
  });

  describe('POST /api/auth/signup', () => {
    it('should create a new user account', async () => {
      const response = await request(app)
        .post('/api/auth/signup')
        .send({
          email: 'test@example.com',
          password: 'SecurePassword123!',
          name: 'Test User',
          phone: '+40712345678',
          role: 'business',
          company: {
            name: 'Test SRL',
            cui: 'RO12345678',
          }
        });

      expect(response.status).toBe(201);
      expect(response.body.user.email).toBe('test@example.com');
      expect(response.body.tokens.accessToken).toBeDefined();
    });

    it('should reject duplicate email', async () => {
      // Create first user
      await request(app).post('/api/auth/signup').send({
        email: 'duplicate@example.com',
        password: 'Password123!',
        name: 'User One',
      });

      // Try to create second user with same email
      const response = await request(app).post('/api/auth/signup').send({
        email: 'duplicate@example.com',
        password: 'Password456!',
        name: 'User Two',
      });

      expect(response.status).toBe(400);
      expect(response.body.error).toContain('existƒÉ deja');
    });
  });

  describe('POST /api/auth/login', () => {
    it('should login with correct credentials', async () => {
      // Create user
      await request(app).post('/api/auth/signup').send({
        email: 'login@example.com',
        password: 'Password123!',
        name: 'Login Test',
      });

      // Login
      const response = await request(app).post('/api/auth/login').send({
        email: 'login@example.com',
        password: 'Password123!',
      });

      expect(response.status).toBe(200);
      expect(response.body.tokens.accessToken).toBeDefined();
    });

    it('should reject incorrect password', async () => {
      await request(app).post('/api/auth/signup').send({
        email: 'wrong@example.com',
        password: 'CorrectPassword!',
        name: 'User',
      });

      const response = await request(app).post('/api/auth/login').send({
        email: 'wrong@example.com',
        password: 'WrongPassword!',
      });

      expect(response.status).toBe(401);
    });
  });
});
```

**6C.11.2 Frontend E2E Tests (Playwright)**

`tests/e2e/rfq-flow.spec.ts`:
```typescript
import { test, expect } from '@playwright/test';

test.describe('RFQ Submission Flow', () => {
  test('guest user can submit RFQ without login', async ({ page }) => {
    await page.goto('/catalog');

    // Add product to cart
    await page.click('text=Profile UNP');
    await page.fill('[name="quantity"]', '100');
    await page.click('text=AdaugƒÉ √Æn Co»ô');

    // Go to cart
    await page.click('[aria-label="Co»ô"]');
    await expect(page).toHaveURL('/cart');

    // Submit RFQ
    await page.click('text=SolicitƒÉ OfertƒÉ');
    await expect(page).toHaveURL('/rfq');

    // Fill company info
    await page.fill('[name="legalName"]', 'Test Company SRL');
    await page.fill('[name="cuiVat"]', 'RO12345678');
    await page.fill('[name="contactPerson"]', 'John Doe');
    await page.fill('[name="email"]', 'john@test.com');
    await page.fill('[name="phone"]', '+40712345678');
    await page.click('text=ContinuƒÉ');

    // Fill delivery info
    await page.fill('[name="street"]', 'Str. Test nr. 1');
    await page.fill('[name="city"]', 'Bucure»ôti');
    await page.fill('[name="county"]', 'Bucure»ôti');
    await page.fill('[name="postalCode"]', '010101');
    await page.click('text=ContinuƒÉ');

    // Submit
    await page.click('text=Trimite Cererea de OfertƒÉ');

    // Verify success
    await expect(page).toHaveURL(/\/rfq\/success/);
    await expect(page.locator('text=Cerere TrimisƒÉ cu Succes')).toBeVisible();
  });

  test('logged-in user has company data prefilled', async ({ page }) => {
    // Login first
    await page.goto('/login');
    await page.fill('[name="email"]', 'existing@test.com');
    await page.fill('[name="password"]', 'Password123!');
    await page.click('text=Autentificare');

    // Add product and go to RFQ
    await page.goto('/catalog');
    await page.click('text=Profile UNP');
    await page.click('text=AdaugƒÉ √Æn Co»ô');
    await page.goto('/rfq');

    // Verify company data is prefilled
    await expect(page.locator('[name="legalName"]')).toHaveValue('Test Company SRL');
    await expect(page.locator('[name="cuiVat"]')).toHaveValue('RO12345678');
    await expect(page.locator('[name="contactPerson"]')).toHaveValue('John Doe');
  });
});
```

**6C.11.3 Load Testing (k6)**

`tests/load/api-load.js`:
```javascript
import http from 'k6/http';
import { check, sleep } from 'k6';

export let options = {
  stages: [
    { duration: '2m', target: 100 }, // Ramp up to 100 users
    { duration: '5m', target: 100 }, // Stay at 100 users
    { duration: '2m', target: 200 }, // Ramp up to 200 users
    { duration: '5m', target: 200 }, // Stay at 200 users
    { duration: '2m', target: 0 },   // Ramp down
  ],
  thresholds: {
    http_req_duration: ['p(95)<500'], // 95% of requests must complete below 500ms
    http_req_failed: ['rate<0.01'],   // Error rate must be below 1%
  },
};

export default function () {
  // Test product catalog endpoint
  let res = http.get('https://api.metalpro.ro/api/products');
  check(res, {
    'status is 200': (r) => r.status === 200,
    'response time < 500ms': (r) => r.timings.duration < 500,
  });

  sleep(1);

  // Test product detail endpoint
  res = http.get('https://api.metalpro.ro/api/products/random-uuid');
  check(res, {
    'status is 200 or 404': (r) => r.status === 200 || r.status === 404,
  });

  sleep(1);
}
```

Run with: `k6 run tests/load/api-load.js`

---

#### 6C.12 Acceptance Criteria

**Backend Infrastructure:**
- [ ] PostgreSQL database running with all migrations applied
- [ ] Redis cache configured and operational
- [ ] S3 bucket created and accessible for file uploads
- [ ] Email service (SendGrid/SES) configured and sending emails
- [ ] All environment variables properly set and secured
- [ ] Docker containers building and running successfully
- [ ] nginx reverse proxy routing traffic correctly

**Authentication:**
- [ ] User signup creates account in database (not localStorage)
- [ ] Passwords are hashed with bcrypt (min 12 rounds)
- [ ] JWT tokens generated with expiration (24h access, 7d refresh)
- [ ] Login validates credentials against database
- [ ] Session stored in database with expiration
- [ ] Logout invalidates session in database
- [ ] Email verification emails sent (non-blocking)
- [ ] Password reset flow functional

**Data Persistence:**
- [ ] Products loaded from database (not mock data)
- [ ] Cart persists in database for authenticated users
- [ ] Cart stored in Redis with session for guest users
- [ ] RFQs saved to database with all details
- [ ] Saved BOM projects stored in database
- [ ] Saved addresses stored in database
- [ ] Order history retrieved from database

**File Uploads:**
- [ ] BOM files uploaded to S3 (not local storage)
- [ ] RFQ attachments uploaded to S3
- [ ] File size limits enforced (50MB max)
- [ ] Malicious file types rejected
- [ ] Uploaded files accessible via signed URLs

**Email Notifications:**
- [ ] RFQ confirmation email sent to customer
- [ ] RFQ notification email sent to operators
- [ ] Email verification sent on signup
- [ ] Password reset email functional
- [ ] Emails have proper formatting and branding

**Security:**
- [ ] All passwords hashed (never stored plaintext)
- [ ] JWT secret is strong random string (32+ chars)
- [ ] CORS properly configured (only allowed origins)
- [ ] Rate limiting active on all endpoints
- [ ] Input validation prevents SQL injection
- [ ] XSS protection via input sanitization
- [ ] HTTPS enforced in production
- [ ] Security headers (HSTS, CSP) configured
- [ ] Session tokens expire after inactivity

**Performance:**
- [ ] Product catalog cached in Redis (1h TTL)
- [ ] Database queries use proper indexes
- [ ] API responses gzipped
- [ ] Static assets served with long cache headers
- [ ] Database connection pooling configured
- [ ] Page load time < 3s on 3G connection
- [ ] API response time < 500ms for p95

**Monitoring:**
- [ ] Sentry error tracking active
- [ ] Application logs written to files
- [ ] Health check endpoints responding
- [ ] Uptime monitoring configured (e.g., UptimeRobot)
- [ ] Error rate alerts configured
- [ ] Performance metrics tracked

**Deployment:**
- [ ] Docker images build successfully
- [ ] docker-compose starts all services
- [ ] Database migrations run automatically on deploy
- [ ] Zero-downtime deployment possible
- [ ] Rollback procedure documented and tested
- [ ] CI/CD pipeline runs tests before deploy
- [ ] Production environment variables secured

**Testing:**
- [ ] Unit tests cover critical business logic (>80% coverage)
- [ ] Integration tests cover API endpoints
- [ ] E2E tests cover critical user flows
- [ ] Load tests pass with 200 concurrent users
- [ ] All tests pass in CI pipeline

---

### Phase 7: Search Optimization & Advanced Filtering
**Timeline:** 1-2 weeks
**Goal:** Enhance search and filtering capabilities

#### 7.1 Advanced Search

**File:** `src/components/search/AdvancedSearchModal.tsx`
- Multi-criteria search form
- Search by: family, standard, grade, dimension range, producer
- Save search queries

**File:** `src/hooks/useAdvancedSearch.ts`
- Advanced search state
- Query builder logic

#### 7.2 Faceted Filtering

**File:** `src/components/catalog/FacetedFilters.tsx`
- Range sliders for numeric values (thickness, length, weight)
- Multi-select checkboxes for categorical filters
- Filter count badges

**File:** `src/lib/utils/filterUtils.ts`
```typescript
// applyFilters(products, filters)
// buildFilterOptions(products)
// syncFiltersWithURL()
```

#### 7.3 Acceptance Criteria
- [ ] Advanced search modal accessible from header
- [ ] Faceted filters show result counts
- [ ] Range sliders work smoothly for numeric values
- [ ] Filters persist in URL for sharing
- [ ] Saved searches feature works (if logged in)

---

### Phase 8: Analytics, SEO & Performance Optimization
**Timeline:** 1-2 weeks
**Goal:** Optimize for performance, SEO, and add analytics tracking

#### 8.1 Analytics Integration

**File:** `src/lib/analytics/gtm.ts`
```typescript
// Google Tag Manager integration
// Event tracking functions:
// - trackCatalogView(category)
// - trackFilterApply(filters)
// - trackPDPView(product)
// - trackAddToEstimate(product, qty)
// - trackRFQSubmit(rfq)
```

**File:** `src/hooks/useAnalytics.ts`
- Hook for tracking page views and events
- DataLayer push functions

**Events to Track:**
- `catalog_view`, `filter_apply`, `pdp_view`, `add_to_estimate`, `estimate_update`, `bom_upload`, `rfq_start`, `rfq_submit`, `rfq_success`, `contact_click`

#### 8.2 SEO Optimization

**File:** `src/components/seo/MetaTags.tsx`
- Dynamic meta tags component
- Open Graph tags
- Twitter Card tags

**File:** `src/lib/seo/generateMetadata.ts`
```typescript
// generateProductMetadata(product)
// generateCategoryMetadata(category)
```

**SEO Checklist:**
- [ ] Descriptive page titles (e.g., "Profile UNP ‚Äì S235JR ‚Äì MetalPro")
- [ ] Meta descriptions for all pages
- [ ] Schema.org Product markup on PDPs
- [ ] Clean URL slugs (/profiles/unp/unp-200-s235jr)
- [ ] Image alt text for all images
- [ ] Sitemap.xml generation
- [ ] Robots.txt configuration

#### 8.3 Performance Optimization

**Performance Targets:**
- FCP (First Contentful Paint): ‚â§ 2.0s
- TTI (Time to Interactive): ‚â§ 3.5s
- Filter interactions: ‚â§ 300ms
- PDP recalculations: ‚â§ 150ms

**Optimization Tasks:**
- [ ] Lazy load catalog images
- [ ] Code splitting by route
- [ ] Implement virtual scrolling for large product lists
- [ ] Optimize bundle size (tree-shaking, dynamic imports)
- [ ] Enable Vite build optimizations
- [ ] Add service worker for offline support (optional)
- [ ] Implement skeleton loaders for all async content

**File:** `src/components/ui/VirtualizedList.tsx`
- Virtual scrolling for product grids with 500+ items

**File:** `vite.config.ts` (update)
```typescript
// Add build optimizations:
// - minification
// - chunk splitting
// - preload directives
```

#### 8.4 Acceptance Criteria
- [ ] All key events tracked in GTM
- [ ] SEO metadata present on all pages
- [ ] Product schema markup validates
- [ ] Lighthouse score ‚â• 90 for Performance, Accessibility, SEO
- [ ] First Contentful Paint ‚â§ 2.0s on catalog

---

### Phase 9: Internationalization (i18n) & Localization
**Timeline:** 1 week
**Goal:** Add Romanian (primary) and English (fallback) language support

#### 9.1 i18n Setup

**File:** `src/lib/i18n/config.ts`
- i18n configuration
- Locale detection
- Language switcher logic

**File:** `src/locales/ro.json`
```json
{
  "header": {
    "search_placeholder": "CautƒÉ profile, table, »õevi...",
    "cart_button": "Estimare",
    "quote_button": "Cere OfertƒÉ"
  },
  "catalog": {
    "filter_by": "FiltreazƒÉ dupƒÉ",
    "clear_filters": "»òterge Filtre",
    "results_count": "{{count}} produse gƒÉsite"
  },
  // ... all UI strings
}
```

**File:** `src/locales/en.json`
```json
{
  "header": {
    "search_placeholder": "Search profiles, plates, pipes...",
    "cart_button": "Estimate",
    "quote_button": "Request Quote"
  },
  // ... English translations
}
```

**File:** `src/hooks/useTranslation.ts`
- Translation hook
- Locale switching
- Number/currency formatting

**File:** `src/components/LanguageSwitcher.tsx`
- Language toggle (RO/EN)
- Flag icons

#### 9.2 Locale-Aware Formatting

**File:** `src/lib/utils/formatting.ts`
```typescript
// formatCurrency(amount, currency, locale)
// formatNumber(number, locale)
// formatUnit(value, unit, locale)
// formatDate(date, locale)
```

#### 9.3 Acceptance Criteria
- [ ] All UI strings extracted to locale files
- [ ] Language switcher works correctly
- [ ] Numbers, currency, dates formatted per locale
- [ ] Units (m, kg, pcs) translated correctly
- [ ] RFQ emails sent in user's language

---

### Phase 10: Back-Office System & RFQ Management
**Timeline:** 4-5 weeks
**Goal:** Build comprehensive back-office system for operators to manage RFQs, pricing, and customer communications

#### 10.1 Back-Office Authentication & Authorization

**File:** `src/pages/backoffice/Login.tsx`
- Separate login page for back-office operators
- 2FA authentication (optional but recommended)
- Session timeout after inactivity

**RBAC (Role-Based Access Control):**
- **Admin:** Full system access, user management, product management
- **Backoffice:** RFQ management, quote generation, customer communication
- **User:** Customer-facing features only

#### 10.2 RFQ Dashboard & Workflow

**File:** `src/pages/backoffice/RFQDashboard.tsx`
- Real-time RFQ queue with status indicators
- Filter/sort by:
  - Status (submitted, acknowledged, in_progress, quoted, completed, cancelled)
  - Date range
  - Assigned operator
  - Company name
  - Estimated value range
- Bulk actions: assign, acknowledge, export to CSV
- Quick stats: Pending RFQs, Average response time, Conversion rate

**File:** `src/components/backoffice/RFQCard.tsx`
- Compact RFQ summary card
- Key info: Reference number, company, total value, status, age
- Quick actions: View details, assign, acknowledge

**File:** `src/pages/backoffice/RFQDetails.tsx`
- **Customer Information Section:**
  - Company details (legal name, CUI/VAT)
  - Contact person, phone, email
  - Billing and delivery addresses
  - Business verification status
  - Past RFQs history

- **Cart/Order Details Section:**
  - Line items table with:
    - Product SKU, title, family
    - Specifications (grade, dimensions, finish, cut list)
    - Requested quantity and unit
    - Estimated weight
    - Indicative unit price (from frontend)
    - **Editable final unit price** (operator input)
    - **Editable final subtotal**
    - **Internal notes** per line item

- **Totals Section:**
  - Estimated subtotal (from frontend)
  - **Final subtotal** (operator calculated)
  - VAT calculation
  - **Delivery/transport cost** (operator input)
  - **Special fees** (cutting, processing) (operator input)
  - **Grand total**

- **Attachments Section:**
  - View uploaded files (BOM, drawings, docs)
  - Download individual files or ZIP all
  - Add internal documents (quotes, calculations)

- **Status & Assignment:**
  - Current status with timeline
  - Assign to operator dropdown
  - Status change actions (acknowledge, start work, send quote, complete, cancel)
  - Status history log

- **Communication Section:**
  - **Internal comments** (visible only to back-office)
  - **Customer-facing notes** (visible in customer portal)
  - Activity timeline (status changes, comments, emails sent)

**File:** `src/components/backoffice/PricingEditor.tsx`
- Inline editing for line item pricing
- Bulk pricing actions (apply margin, apply discount)
- Price validation (warn if below cost)
- Real-time total recalculation

**File:** `src/components/backoffice/QuoteGenerator.tsx`
- **Generate PDF Quote:**
  - Professional quote template
  - Company letterhead
  - Line items with final pricing
  - Terms and conditions
  - Valid until date
  - Payment terms
  - Delivery terms (incoterm)
  - Signature block

- **Email Quote to Customer:**
  - Pre-filled email template
  - Attach PDF quote
  - CC operator email
  - Track email sent status

#### 10.3 Product Management

**File:** `src/pages/backoffice/ProductList.tsx`
- Full product catalog with inactive products
- Bulk actions: activate/deactivate, delete, export
- Filter by family, availability, active status

**File:** `src/pages/backoffice/ProductEdit.tsx`
- Full product CRUD:
  - Basic info (SKU, title, family, category)
  - Specifications (dimensions, grade, standards)
  - Pricing (min/max, currency, unit)
  - Inventory (availability, stock levels - future)
  - Documents (upload datasheets, certificates)

**File:** `src/components/backoffice/ProductImporter.tsx`
- Bulk import products via CSV
- Column mapping wizard
- Validation and error handling
- Import preview before commit

**File:** `src/components/backoffice/PricingManager.tsx`
- Historical pricing view
- Price update with validity dates
- Bulk price updates (by category, family, supplier)

#### 10.4 Company Verification Workflow

**File:** `src/pages/backoffice/VerificationQueue.tsx`
- List of pending business verifications
- Filter by submission date, company name
- Quick approve/reject actions

**File:** `src/pages/backoffice/CompanyVerificationDetails.tsx`
- Company registration details
- CUI/VAT validation (API integration or manual)
- Uploaded verification documents viewer
- Approve/reject with notes
- Notify user via email on decision

#### 10.5 Analytics & Reporting

**File:** `src/pages/backoffice/AnalyticsDashboard.tsx`
- **KPI Cards:**
  - Total RFQs (this month)
  - Pending RFQs
  - Average response time
  - Quote-to-order conversion rate
  - Total quoted value (this month)

- **Charts:**
  - RFQs over time (line chart)
  - RFQs by status (pie chart)
  - Top products by RFQ count (bar chart)
  - Average RFQ value trend
  - Operator performance (RFQs processed, avg time)

- **Reports:**
  - Export RFQ report (date range, status, company)
  - Export sales pipeline report
  - Product performance report

**File:** `src/components/backoffice/ReportExporter.tsx`
- Export to CSV/Excel
- Date range selector
- Custom column selection

#### 10.6 User & Permissions Management

**File:** `src/pages/backoffice/UserManagement.tsx`
- List all users (customers + back-office operators)
- Filter by role, verification status, active status
- User details: RFQs submitted, orders placed, lifetime value

**File:** `src/components/backoffice/UserEditor.tsx`
- Edit user role (user ‚Üí admin, user ‚Üí backoffice)
- Activate/deactivate user
- Reset password
- View audit log for user

#### 10.7 Email Templates & Notifications

**File:** `backend/src/templates/emails/`
- `rfq-confirmation.html` - Customer confirmation on RFQ submission
- `rfq-acknowledged.html` - RFQ acknowledged by operator
- `quote-ready.html` - Final quote ready with PDF attachment
- `verification-approved.html` - Business verification approved
- `verification-rejected.html` - Business verification rejected
- `rfq-completed.html` - RFQ marked as completed (order placed offline)

**Email Service Configuration:**
```typescript
// backend/src/services/EmailService.ts
export class EmailService {
  async sendRFQConfirmation(rfq: RFQ, user: User): Promise<void>
  async sendRFQAcknowledged(rfq: RFQ, operator: User): Promise<void>
  async sendQuoteReady(rfq: RFQ, quotePdfUrl: string): Promise<void>
  async sendVerificationDecision(company: Company, approved: boolean): Promise<void>
  async notifyOperatorNewRFQ(rfq: RFQ, operators: User[]): Promise<void>
}
```

#### 10.8 Workflow Automation

**Background Jobs:**
```typescript
// backend/src/jobs/rfq-jobs.ts

// Auto-acknowledge RFQs after 1 hour if not manually acknowledged
export async function autoAcknowledgeRFQs(): Promise<void>

// Send reminder to operator if RFQ pending for > 24 hours
export async function sendOperatorReminders(): Promise<void>

// Cleanup old draft RFQs (never submitted)
export async function cleanupDraftRFQs(): Promise<void>

// Generate daily RFQ summary email for managers
export async function sendDailySummary(): Promise<void>
```

**Cron Schedule (using Bull queue):**
- Every hour: Auto-acknowledge RFQs
- Daily at 9 AM: Send operator reminders
- Daily at 6 PM: Send daily summary
- Weekly: Cleanup old drafts

#### 10.9 Acceptance Criteria
- [ ] Back-office operators can log in with role-based access
- [ ] RFQ dashboard displays all submitted RFQs with filters
- [ ] Operators can assign RFQs to themselves or others
- [ ] Operators can update line item pricing and calculate totals
- [ ] Operators can generate PDF quotes with company branding
- [ ] Quote email sends to customer with PDF attachment
- [ ] Status changes are logged in audit trail
- [ ] Internal comments are hidden from customers
- [ ] Customer-facing notes visible in customer portal (if implemented)
- [ ] Analytics dashboard shows key metrics in real-time
- [ ] Product management allows full CRUD operations
- [ ] Bulk product import works with CSV files
- [ ] Company verification workflow approves/rejects businesses
- [ ] Email notifications sent at each workflow stage

#### 10.10 Back-Office Component Hierarchy

```
BackOfficeApp
‚îú‚îÄ‚îÄ BackOfficeRouter
‚îÇ   ‚îú‚îÄ‚îÄ BackOfficeLogin
‚îÇ   ‚îú‚îÄ‚îÄ BackOfficeDashboard (Analytics)
‚îÇ   ‚îú‚îÄ‚îÄ RFQDashboard
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RFQFilters
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RFQStats
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ RFQList
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ RFQCard[]
‚îÇ   ‚îú‚îÄ‚îÄ RFQDetails
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CustomerInfoPanel
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CartDetailsTable
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ LineItemRow[]
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ PricingEditor
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TotalsPanel
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AttachmentsPanel
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ StatusPanel
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ StatusTimeline
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CommentsPanel
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ InternalComments
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CustomerNotes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ QuoteGenerator
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ PDFPreview
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ EmailComposer
‚îÇ   ‚îú‚îÄ‚îÄ ProductManagement
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProductList
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProductEdit
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProductImporter
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PricingManager
‚îÇ   ‚îú‚îÄ‚îÄ VerificationQueue
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ VerificationList
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CompanyVerificationDetails
‚îÇ   ‚îú‚îÄ‚îÄ UserManagement
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserList
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UserEditor
‚îÇ   ‚îî‚îÄ‚îÄ Analytics
‚îÇ       ‚îú‚îÄ‚îÄ KPICards
‚îÇ       ‚îú‚îÄ‚îÄ RFQCharts
‚îÇ       ‚îú‚îÄ‚îÄ ProductPerformance
‚îÇ       ‚îî‚îÄ‚îÄ ReportExporter
‚îî‚îÄ‚îÄ BackOfficeNav (Sidebar)
```

---

### Phase 11: Customer Portal (Optional - Future Enhancement)
**Timeline:** 2 weeks
**Goal:** Allow authenticated customers to track their RFQ status

**Features:**
- View submitted RFQs with current status
- Download final quotes (PDF)
- View customer-facing notes from operators
- Upload additional documents to existing RFQ
- Reorder previous RFQs
- View order history

---

## Component Hierarchy (Full Application)

```
App
‚îú‚îÄ‚îÄ Router
‚îÇ   ‚îú‚îÄ‚îÄ Index (Landing Page)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Header
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ HeroSection ‚úÖ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CategoryGrid ‚úÖ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ HowItWorks ‚úÖ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Footer ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ Catalog
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Header
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Breadcrumb
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FilterPanel
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FilterAccordion
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ FilterChips
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProductGrid
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ProductCard[]
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Pagination
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Footer
‚îÇ   ‚îú‚îÄ‚îÄ CategoryPage (/:family)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Header
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Breadcrumb
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CategoryHero
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FilterPanel
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProductGrid
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Footer
‚îÇ   ‚îú‚îÄ‚îÄ ProductDetail (/:family/:slug)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Header
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Breadcrumb
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProductHero
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SpecTable
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ConfigurationPanel
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UnitSelector
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ QuantityInput
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LengthSelector
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FinishSelector
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CutListEditor
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WeightEstimator
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PriceEstimator
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DeliveryCue
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DisclaimerBanner
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RelatedProducts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Footer
‚îÇ   ‚îú‚îÄ‚îÄ EstimateCart (/cart)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Header
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CartLineItem[]
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TotalsPanel
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DisclaimerBanner
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Footer
‚îÇ   ‚îú‚îÄ‚îÄ RFQForm (/rfq)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Header
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ StepIndicator
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CompanyInfoStep
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DeliveryAddressStep
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PreferencesStep
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AttachmentsStep
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReviewStep
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Footer
‚îÇ   ‚îú‚îÄ‚îÄ RFQConfirmation (/rfq/confirmation)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Header
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ConfirmationScreen
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Footer
‚îÇ   ‚îú‚îÄ‚îÄ BOMUpload (/bom)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Header
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UploadDropzone
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BOMMapper
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UnmatchedRowMapper
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Footer
‚îÇ   ‚îú‚îÄ‚îÄ Login (/login)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ LoginForm
‚îÇ   ‚îú‚îÄ‚îÄ Signup (/signup)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SignupForm
‚îÇ   ‚îú‚îÄ‚îÄ Account (/account)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Header
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AccountSidebar
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProfileTab
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CompanyInfoTab
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SavedProjectsTab
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ OrderHistoryTab
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AddressesTab
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Footer
‚îÇ   ‚îú‚îÄ‚îÄ NotFound ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ EstimateCartDrawer (global)
‚îú‚îÄ‚îÄ SearchResults (global)
‚îú‚îÄ‚îÄ ToastProvider ‚úÖ
‚îî‚îÄ‚îÄ AuthProvider
```

---

## Data Model Implementation

### TypeScript Interfaces

**File:** `src/types/index.ts`

```typescript
// Enums
export type Unit = 'm' | 'kg' | 'pcs' | 'bundle';
export type Availability = 'in_stock' | 'on_order' | 'backorder';
export type Incoterm = 'EXW' | 'FCA' | 'CPT' | 'DAP' | 'DDP';
export type ProductFamily = 'profiles' | 'plates' | 'pipes' | 'fasteners' | 'stainless' | 'nonferrous';
export type RFQStatus = 'submitted' | 'acknowledged' | 'in_progress' | 'quoted' | 'completed' | 'cancelled';

// Category
export interface Category {
  id: string;
  slug: string;
  name: string;
  description?: string;
  parentId?: string | null;
}

// Product
export interface Product {
  id: string;
  slug: string;
  family: ProductFamily;
  title: string;
  sku: string;
  standards: string[];
  grade: string;
  dimensions: Record<string, string | number>;
  lengthOptionsM?: number[];
  baseUnit: Unit;
  densityKgPerM3?: number;
  sectionProps?: Record<string, number>;
  availability: Availability;
  producer?: string;
  docs?: Array<{ label: string; url: string }>;
  indicativePrice: {
    currency: 'RON' | 'EUR';
    unit: Unit;
    min?: number;
    max?: number;
  };
  deliveryEstimate?: {
    windowDays?: [number, number];
    date?: string;
    feeBand?: string;
  };
  imageUrl?: string;
  createdAt: string;
  updatedAt: string;
}

// Cart Line
export interface CartLine {
  id: string;
  productId: string;
  product?: Product; // populated for display
  specs: {
    grade?: string;
    standard?: string;
    dimensionSummary?: string;
    lengthM?: number;
    finish?: string;
    cutList?: Array<{ lengthM: number; qty: number }>;
  };
  quantity: number;
  unit: Unit;
  estWeightKg?: number;
  indicativeUnitPrice?: number;
  indicativeSubtotal?: number;
}

// Estimate Cart
export interface EstimateCart {
  id: string;
  lines: CartLine[];
  totals: {
    estWeightKg: number;
    estSubtotal: number;
    vatIndicative?: number;
    deliveryFeeBand?: string;
  };
  currency: 'RON' | 'EUR';
  disclaimerAccepted: boolean;
  createdAt: string;
  updatedAt: string;
}

// Address
export interface Address {
  street: string;
  city: string;
  county?: string;
  postalCode?: string;
  country: string;
}

// Contact
export interface Contact {
  person: string;
  phone: string;
  email: string;
}

// Company
export interface Company {
  legalName: string;
  cuiVat: string;
  billingAddress: Address;
  deliveryAddress?: Address;
  contact: Contact;
  isVerifiedBusiness?: boolean;
  incotermPref?: Incoterm;
}

// RFQ
export interface RFQ {
  id: string;
  referenceNumber: string;
  company: Company;
  cartSnapshot: EstimateCart;
  desiredDeliveryDate?: string;
  incoterm?: Incoterm;
  notes?: string;
  attachments?: Array<{
    name: string;
    type: 'csv' | 'xlsx' | 'pdf' | 'image';
    url: string;
  }>;
  status: RFQStatus;
  createdAt: string;
  updatedAt: string;
}

// BOM Row
export interface BOMRow {
  rawLine: string;
  mappedProductId?: string;
  quantity?: number;
  unit?: Unit;
  lengthM?: number;
  grade?: string;
  standard?: string;
  dimensionSummary?: string;
  matchConfidence?: number;
  isMatched: boolean;
}

// User
export interface User {
  id: string;
  email: string;
  firstName: string;
  lastName: string;
  phone?: string;
  companyId?: string;
  role: 'user' | 'admin';
  isVerified: boolean;
  createdAt: string;
}

// Saved Project
export interface SavedProject {
  id: string;
  userId: string;
  name: string;
  description?: string;
  cart: EstimateCart;
  createdAt: string;
  updatedAt: string;
}
```

---

---

## Backend Architecture & Database Design

### System Architecture Diagram

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   React SPA     ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   API Gateway    ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   PostgreSQL    ‚îÇ
‚îÇ  (Frontend)     ‚îÇ  HTTPS  ‚îÇ   (Express/      ‚îÇ   SQL   ‚îÇ   Database      ‚îÇ
‚îÇ                 ‚îÇ         ‚îÇ    NestJS)       ‚îÇ         ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                     ‚îÇ                            ‚îÇ
                                     ‚îÇ                            ‚îÇ
                                     ‚ñº                            ‚ñº
                            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                            ‚îÇ   Redis Cache    ‚îÇ         ‚îÇ   File Storage  ‚îÇ
                            ‚îÇ   & Job Queue    ‚îÇ         ‚îÇ   (S3/Local)    ‚îÇ
                            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                     ‚îÇ
                                     ‚ñº
                            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                            ‚îÇ  Email Service   ‚îÇ
                            ‚îÇ  (SendGrid/SES)  ‚îÇ
                            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                     ‚îÇ
                                     ‚ñº
                            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                            ‚îÇ  Back-Office UI  ‚îÇ
                            ‚îÇ  (Admin Panel)   ‚îÇ
                            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Database Schema (PostgreSQL)

#### Complete Schema Definition

```sql
-- Enable UUID extension
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

-- =====================================================
-- PRODUCTS & CATALOG
-- =====================================================

CREATE TABLE categories (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    slug VARCHAR(255) UNIQUE NOT NULL,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    parent_id UUID REFERENCES categories(id) ON DELETE CASCADE,
    display_order INTEGER DEFAULT 0,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_categories_parent_id ON categories(parent_id);
CREATE INDEX idx_categories_slug ON categories(slug);

CREATE TABLE products (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    sku VARCHAR(100) UNIQUE NOT NULL,
    slug VARCHAR(255) UNIQUE NOT NULL,
    category_id UUID REFERENCES categories(id) ON DELETE SET NULL,
    family VARCHAR(50) NOT NULL CHECK (family IN ('profiles', 'plates', 'pipes', 'fasteners', 'stainless', 'nonferrous')),
    title VARCHAR(500) NOT NULL,
    description TEXT,
    standards TEXT[], -- Array of standards: ['EN 10025', 'EN 10219']
    grade VARCHAR(100),
    dimensions JSONB, -- Flexible: {"height": 200, "width": 190, "thickness": 8}
    length_options_m DECIMAL[], -- Array: [6, 12]
    base_unit VARCHAR(20) NOT NULL CHECK (base_unit IN ('m', 'kg', 'pcs', 'bundle')),
    density_kg_per_m3 DECIMAL(10,4),
    section_props JSONB, -- Section properties for calculations
    availability VARCHAR(50) DEFAULT 'in_stock' CHECK (availability IN ('in_stock', 'on_order', 'backorder')),
    producer VARCHAR(255),
    image_url VARCHAR(500),
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_products_category_id ON products(category_id);
CREATE INDEX idx_products_family ON products(family);
CREATE INDEX idx_products_sku ON products(sku);
CREATE INDEX idx_products_slug ON products(slug);
CREATE INDEX idx_products_availability ON products(availability);
CREATE INDEX idx_products_grade ON products(grade);
CREATE INDEX idx_products_standards ON products USING GIN(standards);

CREATE TABLE product_prices (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    product_id UUID REFERENCES products(id) ON DELETE CASCADE,
    currency VARCHAR(3) DEFAULT 'RON' CHECK (currency IN ('RON', 'EUR', 'USD')),
    unit VARCHAR(20) NOT NULL CHECK (unit IN ('m', 'kg', 'pcs', 'bundle')),
    price_min DECIMAL(10,2),
    price_max DECIMAL(10,2),
    valid_from TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    valid_to TIMESTAMP WITH TIME ZONE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_product_prices_product_id ON product_prices(product_id);
CREATE INDEX idx_product_prices_valid_from ON product_prices(valid_from);

CREATE TABLE product_documents (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    product_id UUID REFERENCES products(id) ON DELETE CASCADE,
    label VARCHAR(255) NOT NULL,
    file_url VARCHAR(500) NOT NULL,
    file_type VARCHAR(50), -- 'pdf', 'image', 'certificate'
    file_size_bytes INTEGER,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_product_documents_product_id ON product_documents(product_id);

-- =====================================================
-- USERS & AUTHENTICATION
-- =====================================================

CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    first_name VARCHAR(100),
    last_name VARCHAR(100),
    phone VARCHAR(50),
    role VARCHAR(50) DEFAULT 'user' CHECK (role IN ('user', 'admin', 'backoffice')),
    is_verified BOOLEAN DEFAULT false,
    is_active BOOLEAN DEFAULT true,
    last_login_at TIMESTAMP WITH TIME ZONE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_role ON users(role);

CREATE TABLE companies (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    legal_name VARCHAR(500) NOT NULL,
    cui_vat VARCHAR(100) UNIQUE NOT NULL,
    registration_number VARCHAR(100),
    is_verified_business BOOLEAN DEFAULT false,
    verification_status VARCHAR(50) DEFAULT 'pending' CHECK (verification_status IN ('pending', 'approved', 'rejected')),
    incoterm_pref VARCHAR(10) CHECK (incoterm_pref IN ('EXW', 'FCA', 'CPT', 'DAP', 'DDP')),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_companies_cui_vat ON companies(cui_vat);
CREATE INDEX idx_companies_verification_status ON companies(verification_status);

CREATE TABLE user_companies (
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    company_id UUID REFERENCES companies(id) ON DELETE CASCADE,
    is_primary BOOLEAN DEFAULT false,
    role_in_company VARCHAR(100), -- 'owner', 'employee', 'admin'
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (user_id, company_id)
);

CREATE TABLE addresses (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    company_id UUID REFERENCES companies(id) ON DELETE CASCADE,
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    address_type VARCHAR(50) NOT NULL CHECK (address_type IN ('billing', 'delivery', 'both')),
    street VARCHAR(500),
    city VARCHAR(255),
    county VARCHAR(255),
    postal_code VARCHAR(50),
    country VARCHAR(100) DEFAULT 'Romania',
    is_default BOOLEAN DEFAULT false,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    CHECK (company_id IS NOT NULL OR user_id IS NOT NULL)
);

CREATE INDEX idx_addresses_company_id ON addresses(company_id);
CREATE INDEX idx_addresses_user_id ON addresses(user_id);

-- =====================================================
-- RFQs (OFFER REQUESTS) - CORE BUSINESS LOGIC
-- =====================================================

CREATE TABLE rfqs (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    reference_number VARCHAR(50) UNIQUE NOT NULL, -- e.g., "RFQ-2025-00001"
    user_id UUID REFERENCES users(id) ON DELETE SET NULL,
    company_id UUID REFERENCES companies(id) ON DELETE SET NULL,

    -- Company info snapshot (at time of submission)
    company_legal_name VARCHAR(500),
    company_cui_vat VARCHAR(100),

    -- Contact info snapshot
    contact_person VARCHAR(255),
    contact_phone VARCHAR(50),
    contact_email VARCHAR(255),

    -- Addresses snapshot (JSONB for flexibility)
    billing_address JSONB,
    delivery_address JSONB,

    -- Cart snapshot with all line items
    cart_snapshot JSONB NOT NULL, -- Complete EstimateCart interface

    -- Preferences
    desired_delivery_date DATE,
    incoterm VARCHAR(10) CHECK (incoterm IN ('EXW', 'FCA', 'CPT', 'DAP', 'DDP')),
    notes TEXT,

    -- Status tracking
    status VARCHAR(50) DEFAULT 'submitted' CHECK (status IN ('submitted', 'acknowledged', 'in_progress', 'quoted', 'completed', 'cancelled')),

    -- Calculated totals (denormalized for performance)
    total_items INTEGER DEFAULT 0,
    estimated_total_value DECIMAL(12,2),
    estimated_total_weight_kg DECIMAL(10,2),
    currency VARCHAR(3) DEFAULT 'RON',

    -- Assignment to back-office operator
    assigned_to_user_id UUID REFERENCES users(id) ON DELETE SET NULL,
    assigned_at TIMESTAMP WITH TIME ZONE,

    -- Final quote data (populated by back-office)
    final_quote_amount DECIMAL(12,2),
    final_quote_notes TEXT,
    final_quote_pdf_url VARCHAR(500),
    quoted_at TIMESTAMP WITH TIME ZONE,

    -- Timestamps
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    completed_at TIMESTAMP WITH TIME ZONE
);

CREATE INDEX idx_rfqs_reference_number ON rfqs(reference_number);
CREATE INDEX idx_rfqs_user_id ON rfqs(user_id);
CREATE INDEX idx_rfqs_company_id ON rfqs(company_id);
CREATE INDEX idx_rfqs_status ON rfqs(status);
CREATE INDEX idx_rfqs_assigned_to_user_id ON rfqs(assigned_to_user_id);
CREATE INDEX idx_rfqs_created_at ON rfqs(created_at DESC);

CREATE TABLE rfq_items (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    rfq_id UUID REFERENCES rfqs(id) ON DELETE CASCADE,
    product_id UUID REFERENCES products(id) ON DELETE SET NULL,

    -- Product snapshot at time of RFQ
    product_sku VARCHAR(100),
    product_title VARCHAR(500),
    product_family VARCHAR(50),

    -- Specifications
    specs JSONB, -- grade, standard, dimensions, length, finish, cutList

    -- Quantities
    quantity DECIMAL(10,2) NOT NULL,
    unit VARCHAR(20) NOT NULL,

    -- Estimates
    estimated_weight_kg DECIMAL(10,2),
    indicative_unit_price DECIMAL(10,2),
    indicative_subtotal DECIMAL(12,2),

    -- Final pricing (populated by back-office)
    final_unit_price DECIMAL(10,2),
    final_subtotal DECIMAL(12,2),
    final_notes TEXT,

    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_rfq_items_rfq_id ON rfq_items(rfq_id);
CREATE INDEX idx_rfq_items_product_id ON rfq_items(product_id);

CREATE TABLE rfq_attachments (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    rfq_id UUID REFERENCES rfqs(id) ON DELETE CASCADE,
    file_name VARCHAR(500) NOT NULL,
    file_type VARCHAR(50), -- 'csv', 'xlsx', 'pdf', 'image'
    file_url VARCHAR(500) NOT NULL,
    file_size_bytes INTEGER,
    uploaded_by_user_id UUID REFERENCES users(id) ON DELETE SET NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_rfq_attachments_rfq_id ON rfq_attachments(rfq_id);

CREATE TABLE rfq_status_history (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    rfq_id UUID REFERENCES rfqs(id) ON DELETE CASCADE,
    previous_status VARCHAR(50),
    new_status VARCHAR(50) NOT NULL,
    changed_by_user_id UUID REFERENCES users(id) ON DELETE SET NULL,
    notes TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_rfq_status_history_rfq_id ON rfq_status_history(rfq_id);

CREATE TABLE rfq_comments (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    rfq_id UUID REFERENCES rfqs(id) ON DELETE CASCADE,
    user_id UUID REFERENCES users(id) ON DELETE SET NULL,
    comment TEXT NOT NULL,
    is_internal BOOLEAN DEFAULT false, -- internal notes only visible to back-office
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_rfq_comments_rfq_id ON rfq_comments(rfq_id);
CREATE INDEX idx_rfq_comments_is_internal ON rfq_comments(is_internal);

-- =====================================================
-- SAVED PROJECTS
-- =====================================================

CREATE TABLE saved_projects (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    cart_data JSONB NOT NULL, -- EstimateCart interface
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_saved_projects_user_id ON saved_projects(user_id);

-- =====================================================
-- AUDIT & LOGGING
-- =====================================================

CREATE TABLE audit_logs (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    user_id UUID REFERENCES users(id) ON DELETE SET NULL,
    action VARCHAR(100) NOT NULL, -- 'create', 'update', 'delete', 'view'
    entity_type VARCHAR(100) NOT NULL, -- 'rfq', 'product', 'user', etc.
    entity_id UUID,
    old_values JSONB,
    new_values JSONB,
    ip_address INET,
    user_agent TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);

CREATE INDEX idx_audit_logs_user_id ON audit_logs(user_id);
CREATE INDEX idx_audit_logs_entity_type ON audit_logs(entity_type);
CREATE INDEX idx_audit_logs_created_at ON audit_logs(created_at DESC);

-- =====================================================
-- SESSIONS (if using database sessions)
-- =====================================================

CREATE TABLE sessions (
    sid VARCHAR(255) PRIMARY KEY,
    sess JSON NOT NULL,
    expire TIMESTAMP WITH TIME ZONE NOT NULL
);

CREATE INDEX idx_sessions_expire ON sessions(expire);

-- =====================================================
-- FUNCTIONS & TRIGGERS
-- =====================================================

-- Auto-update updated_at timestamp
CREATE OR REPLACE FUNCTION update_updated_at_column()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$$ language 'plpgsql';

-- Apply trigger to all relevant tables
CREATE TRIGGER update_categories_updated_at BEFORE UPDATE ON categories
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
CREATE TRIGGER update_products_updated_at BEFORE UPDATE ON products
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
CREATE TRIGGER update_users_updated_at BEFORE UPDATE ON users
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
CREATE TRIGGER update_companies_updated_at BEFORE UPDATE ON companies
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
CREATE TRIGGER update_addresses_updated_at BEFORE UPDATE ON addresses
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
CREATE TRIGGER update_rfqs_updated_at BEFORE UPDATE ON rfqs
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();
CREATE TRIGGER update_saved_projects_updated_at BEFORE UPDATE ON saved_projects
    FOR EACH ROW EXECUTE FUNCTION update_updated_at_column();

-- Auto-generate RFQ reference number
CREATE SEQUENCE rfq_reference_seq START 1;

CREATE OR REPLACE FUNCTION generate_rfq_reference()
RETURNS TRIGGER AS $$
BEGIN
    NEW.reference_number = 'RFQ-' || TO_CHAR(CURRENT_DATE, 'YYYY') || '-' ||
                           LPAD(nextval('rfq_reference_seq')::TEXT, 5, '0');
    RETURN NEW;
END;
$$ language 'plpgsql';

CREATE TRIGGER generate_rfq_reference_trigger BEFORE INSERT ON rfqs
    FOR EACH ROW WHEN (NEW.reference_number IS NULL)
    EXECUTE FUNCTION generate_rfq_reference();
```

---

## API Endpoints (Backend Requirements)

### Public API (No Auth Required)

#### Products API
- `GET /api/categories` - List all categories
- `GET /api/categories/:id` - Get category details
- `GET /api/products` - List products (with filters, pagination)
  - Query params: `family`, `grade`, `standard`, `availability`, `minPrice`, `maxPrice`, `page`, `limit`, `sort`
- `GET /api/products/:id` - Get product by ID
- `GET /api/products/slug/:slug` - Get product by slug
- `GET /api/search?q=...` - Search products

#### RFQ API (Guest Submissions)
- `POST /api/rfq` - Submit RFQ (guest or authenticated)
  - Request body: Complete RFQ data including cart, company info, contact, addresses
  - Response: `{ id, referenceNumber, status, confirmationEmailSent }`

### Authenticated API (JWT Required)

#### Auth API
- `POST /api/auth/signup` - User signup
- `POST /api/auth/login` - User login (returns JWT)
- `POST /api/auth/logout` - User logout (invalidate token)
- `POST /api/auth/refresh` - Refresh JWT token
- `POST /api/auth/forgot-password` - Request password reset
- `POST /api/auth/reset-password` - Reset password with token
- `GET /api/auth/verify-email/:token` - Verify email address

#### User API
- `GET /api/user/profile` - Get user profile
- `PUT /api/user/profile` - Update profile
- `PUT /api/user/password` - Change password
- `GET /api/user/rfqs` - List user's RFQs with status
- `GET /api/user/rfqs/:id` - Get specific RFQ details

#### Saved Projects API
- `GET /api/user/projects` - List saved projects
- `POST /api/user/projects` - Save project (cart snapshot)
- `GET /api/user/projects/:id` - Get project details
- `PUT /api/user/projects/:id` - Update project
- `DELETE /api/user/projects/:id` - Delete project

#### Company & Address API
- `GET /api/user/company` - Get user's company info
- `PUT /api/user/company` - Update company info
- `GET /api/user/addresses` - List user's addresses
- `POST /api/user/addresses` - Add address
- `PUT /api/user/addresses/:id` - Update address
- `DELETE /api/user/addresses/:id` - Delete address

#### Verification API
- `POST /api/verification/submit` - Submit business verification docs
- `GET /api/verification/status` - Get verification status
- `GET /api/verification/documents` - List uploaded documents

### Back-Office API (Admin/Backoffice Role Required)

#### RFQ Management API
- `GET /api/backoffice/rfqs` - List all RFQs with filters
  - Query params: `status`, `assignedTo`, `dateFrom`, `dateTo`, `companyName`, `page`, `limit`, `sort`
- `GET /api/backoffice/rfqs/:id` - Get RFQ full details
- `PUT /api/backoffice/rfqs/:id/status` - Update RFQ status
- `PUT /api/backoffice/rfqs/:id/assign` - Assign RFQ to operator
- `POST /api/backoffice/rfqs/:id/comments` - Add comment to RFQ
- `GET /api/backoffice/rfqs/:id/comments` - Get RFQ comments
- `PUT /api/backoffice/rfqs/:id/items/:itemId` - Update line item final pricing
- `POST /api/backoffice/rfqs/:id/quote` - Generate and send final quote
  - Updates final_quote_amount, final_quote_notes, generates PDF
  - Sends email to customer
- `GET /api/backoffice/rfqs/:id/history` - Get status change history

#### Product Management API
- `GET /api/backoffice/products` - List all products (with inactive)
- `POST /api/backoffice/products` - Create product
- `PUT /api/backoffice/products/:id` - Update product
- `DELETE /api/backoffice/products/:id` - Soft delete product
- `POST /api/backoffice/products/bulk-import` - Bulk import products (CSV)
- `PUT /api/backoffice/products/:id/pricing` - Update product pricing

#### Company Verification API
- `GET /api/backoffice/companies/pending` - List pending verifications
- `PUT /api/backoffice/companies/:id/verify` - Approve/reject company verification
- `GET /api/backoffice/companies/:id/documents` - View verification documents

#### Analytics API
- `GET /api/backoffice/analytics/dashboard` - Dashboard metrics
  - Total RFQs, conversion rate, average RFQ value, popular products
- `GET /api/backoffice/analytics/rfqs` - RFQ analytics
- `GET /api/backoffice/analytics/products` - Product performance

#### User Management API
- `GET /api/backoffice/users` - List all users
- `GET /api/backoffice/users/:id` - Get user details
- `PUT /api/backoffice/users/:id` - Update user (role, status)
- `DELETE /api/backoffice/users/:id` - Deactivate user

### BOM Upload API
- `POST /api/bom/parse` - Upload and parse BOM file (CSV/XLSX)
  - Returns: Parsed rows with auto-match confidence
- `POST /api/bom/match` - Confirm product mappings
  - Returns: Validated cart data ready for RFQ

---

## Testing Strategy

### Unit Tests
- **Framework:** Vitest
- **Coverage Target:** ‚â• 80%
- **Focus Areas:**
  - Utility functions (formatters, calculators, validators)
  - Custom hooks (useSearch, useProductConfig, useCart)
  - Data transformers (BOM parser, filter utils)

### Integration Tests
- **Framework:** React Testing Library
- **Focus Areas:**
  - Component interactions (filter panel + product grid)
  - Form validation (RFQ form, login form)
  - Cart operations (add, update, remove)

### E2E Tests
- **Framework:** Playwright or Cypress
- **Critical User Flows:**
  1. Browse catalog ‚Üí filter products ‚Üí view PDP ‚Üí add to cart ‚Üí submit RFQ
  2. Upload BOM ‚Üí auto-map products ‚Üí add to cart ‚Üí submit RFQ
  3. User signup ‚Üí business verification ‚Üí save project ‚Üí load project

### Accessibility Testing
- **Tool:** axe DevTools, WAVE
- **Target:** WCAG 2.2 AA compliance
- **Focus Areas:**
  - Keyboard navigation
  - Screen reader support
  - Color contrast
  - Form labels and ARIA attributes

---

## Deployment & CI/CD

### Build Process
```bash
npm run build           # Production build
npm run build:dev       # Development build
npm run preview         # Preview production build locally
```

### Environment Variables
**File:** `.env.local`
```bash
VITE_API_BASE_URL=https://api.metalpro.ro
VITE_GTM_ID=GTM-XXXXXXX
VITE_SENTRY_DSN=https://...
VITE_ENV=production
```

### Deployment Targets
1. **Netlify** (recommended for static hosting)
   - Auto-deploy from `main` branch
   - Preview deployments for PRs
   - Edge functions for API proxying (optional)

2. **Vercel**
   - Similar features to Netlify
   - Serverless functions for API

3. **AWS S3 + CloudFront**
   - S3 bucket for static assets
   - CloudFront for CDN and SSL
   - Lambda@Edge for dynamic routing

### CI/CD Pipeline (GitHub Actions)
```yaml
# .github/workflows/deploy.yml
name: Deploy
on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
      - run: npm ci
      - run: npm run lint
      - run: npm run test
      - run: npm run build
      - name: Deploy to Netlify
        uses: netlify/actions/cli@master
        with:
          args: deploy --prod
        env:
          NETLIFY_AUTH_TOKEN: ${{ secrets.NETLIFY_AUTH_TOKEN }}
          NETLIFY_SITE_ID: ${{ secrets.NETLIFY_SITE_ID }}
```

---

## Performance Budgets

### Bundle Size Targets
- **Main Bundle:** ‚â§ 200 KB (gzipped)
- **Vendor Bundle:** ‚â§ 150 KB (gzipped)
- **Total JS:** ‚â§ 350 KB (gzipped)
- **CSS:** ‚â§ 50 KB (gzipped)

### Performance Metrics (Lighthouse)
- **Performance:** ‚â• 90
- **Accessibility:** ‚â• 95
- **Best Practices:** ‚â• 95
- **SEO:** ‚â• 95

### Core Web Vitals
- **LCP (Largest Contentful Paint):** ‚â§ 2.5s
- **FID (First Input Delay):** ‚â§ 100ms
- **CLS (Cumulative Layout Shift):** ‚â§ 0.1

---

## Security Considerations

### Frontend Security
- **XSS Prevention:** Sanitize all user inputs, use React's built-in escaping
- **CSRF Protection:** Use anti-CSRF tokens for state-changing operations
- **Content Security Policy:** Implement strict CSP headers
- **Dependency Scanning:** Regular `npm audit` and Dependabot alerts
- **Sensitive Data:** Never store sensitive data in localStorage (only cart, preferences)

### Authentication Security
- **JWT Tokens:** Store in httpOnly cookies (if backend supports)
- **Token Refresh:** Implement silent token refresh
- **Password Requirements:** Min 8 chars, complexity rules
- **Rate Limiting:** Implement on login/signup endpoints

### GDPR Compliance
- **Cookie Consent:** Explicit consent banner for analytics cookies
- **Data Export:** Allow users to export their data
- **Data Deletion:** Allow users to request account deletion
- **Privacy Policy:** Link in footer
- **Data Processing Agreement:** For B2B customers

---

## Documentation & Knowledge Transfer

### Developer Documentation
- **README.md:** Project setup, scripts, contributing guidelines
- **ARCHITECTURE.md:** High-level architecture overview
- **COMPONENT_LIBRARY.md:** Component API documentation
- **API_DOCUMENTATION.md:** Backend API specs (OpenAPI/Swagger)

### User Documentation
- **Help Center:** In-app help pages
- **FAQ:** Common questions about ordering, RFQs, pricing
- **Video Tutorials:** How to use BOM upload, configure products

### Code Documentation
- **JSDoc Comments:** For all exported functions and components
- **Storybook:** Component library documentation (optional)
- **Type Definitions:** Comprehensive TypeScript types

---

## Risk Mitigation

### Technical Risks
| Risk | Impact | Mitigation |
|------|--------|-----------|
| Poor performance with 500+ SKUs | High | Implement virtual scrolling, lazy loading, code splitting |
| BOM auto-mapping accuracy | Medium | Provide manual mapping UI, improve matching algorithms over time |
| Complex weight calculations | Medium | Pre-calculate and store section properties, validate with sales team |
| Browser compatibility | Low | Test on Chrome, Firefox, Safari, Edge; use polyfills if needed |
| Backend API delays | Medium | Implement optimistic UI updates, loading states, error handling |

### Business Risks
| Risk | Impact | Mitigation |
|------|--------|-----------|
| Gross estimate accuracy | High | Clear disclaimers, sales team review before quoting |
| CUI/VAT validation failures | Medium | Implement robust validation, fallback to manual verification |
| User confusion on B2B flow | Medium | Clear UX copy, tooltips, onboarding flow |
| Low conversion from estimate to RFQ | High | A/B test CTAs, simplify RFQ form, add trust signals |

---

## Success Metrics (KPIs)

### Product Metrics
- **Catalog Engagement:** Average products viewed per session
- **Filter Usage:** % of users who apply filters
- **Search Usage:** % of users who use search
- **PDP Engagement:** Time spent on PDP, scroll depth

### Conversion Metrics
- **Add to Estimate Rate:** % of PDP views that result in add to cart
- **Cart Abandonment Rate:** % of carts not converted to RFQ
- **RFQ Submission Rate:** % of cart views that result in RFQ submission
- **Conversion Time:** Average time from first visit to RFQ submission

### Business Metrics
- **RFQs per Month:** Total qualified leads generated
- **Average RFQ Value:** Average estimated value per RFQ
- **Quote-to-Order Conversion:** % of RFQs that result in orders (tracked offline)
- **Customer Satisfaction:** NPS score from post-RFQ survey

### Technical Metrics
- **Page Load Time:** Average FCP and TTI
- **Error Rate:** % of sessions with JS errors
- **API Response Time:** P95 response times for key endpoints
- **Uptime:** 99.9% availability target

---

## Future Enhancements (Post-MVP)

### Phase 11: Mobile App (React Native)
- Native iOS/Android app for field engineers
- Quick product lookup and RFQ submission
- Offline mode for catalog browsing

### Phase 12: AI-Powered Recommendations
- "Customers who bought this also bought..."
- Smart BOM completion (suggest missing items)
- Auto-suggest alternatives for out-of-stock items

### Phase 13: Real-Time Pricing (Phase 2)
- Integration with supplier APIs for real-time pricing
- Dynamic pricing based on market conditions
- Volume tier discounts

### Phase 14: 3D Visualization
- 3D models of profiles and parts
- Dimension visualization for better understanding
- Cut list visualization in 3D

### Phase 15: Integration with ERP Systems
- SAP, Oracle, Microsoft Dynamics integration
- Direct order placement from customer's ERP
- Inventory sync

---

---

## RFQ Workflow & Business Process

### End-to-End RFQ Lifecycle

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     CUSTOMER JOURNEY                                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

1. PRODUCT DISCOVERY
   ‚îú‚îÄ‚îÄ User browses catalog / searches products
   ‚îú‚îÄ‚îÄ Applies filters (grade, dimensions, availability)
   ‚îú‚îÄ‚îÄ Views product detail pages
   ‚îî‚îÄ‚îÄ Configures specifications (quantity, length, finish)

2. CART BUILDING
   ‚îú‚îÄ‚îÄ Adds products to Estimate Cart
   ‚îú‚îÄ‚îÄ Reviews line items with gross estimates
   ‚îú‚îÄ‚îÄ Sees total weight, VAT (indicative), delivery fee band
   ‚îî‚îÄ‚îÄ Accepts disclaimer: "Prices are estimates only"

3. RFQ SUBMISSION
   ‚îú‚îÄ‚îÄ Clicks "Request Final Quote" ‚Üí redirects to RFQ Form
   ‚îú‚îÄ‚îÄ Step 1: Company Info (legal name, CUI/VAT, contact)
   ‚îú‚îÄ‚îÄ Step 2: Delivery Address (billing & delivery)
   ‚îú‚îÄ‚îÄ Step 3: Preferences (incoterm, desired delivery date)
   ‚îú‚îÄ‚îÄ Step 4: Attachments (BOM, drawings, cut lists)
   ‚îú‚îÄ‚îÄ Step 5: Review & Submit
   ‚îî‚îÄ‚îÄ Frontend POST /api/rfq with complete cart snapshot

4. BACKEND PROCESSING
   ‚îú‚îÄ‚îÄ API validates RFQ data (company, CUI/VAT format, cart)
   ‚îú‚îÄ‚îÄ Saves RFQ to database with status = 'submitted'
   ‚îú‚îÄ‚îÄ Auto-generates reference number (e.g., RFQ-2025-00042)
   ‚îú‚îÄ‚îÄ Saves cart snapshot (JSONB) for historical accuracy
   ‚îú‚îÄ‚îÄ Saves line items to rfq_items table
   ‚îú‚îÄ‚îÄ Uploads attachments to S3/local storage
   ‚îú‚îÄ‚îÄ Creates rfq_status_history entry
   ‚îî‚îÄ‚îÄ Triggers email notifications

5. EMAIL NOTIFICATIONS (Async via Job Queue)
   ‚îú‚îÄ‚îÄ Customer: "RFQ Confirmation" email with reference number
   ‚îú‚îÄ‚îÄ Back-office: "New RFQ Received" notification to operators
   ‚îî‚îÄ‚îÄ Email includes summary: company, total value, # of items

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   BACK-OFFICE OPERATOR JOURNEY                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

6. RFQ ASSIGNMENT
   ‚îú‚îÄ‚îÄ Operator logs into Back-Office Dashboard
   ‚îú‚îÄ‚îÄ Sees new RFQ in queue (status: submitted)
   ‚îú‚îÄ‚îÄ Reviews company info, cart details, attachments
   ‚îú‚îÄ‚îÄ Assigns RFQ to self (or manager assigns)
   ‚îî‚îÄ‚îÄ Status changes to 'acknowledged'
        ‚îî‚îÄ‚îÄ Triggers email: "RFQ Acknowledged" to customer

7. PRICING & QUOTE GENERATION
   ‚îú‚îÄ‚îÄ Operator reviews each line item
   ‚îú‚îÄ‚îÄ Checks current market prices for materials
   ‚îú‚îÄ‚îÄ Edits final_unit_price for each line item
   ‚îú‚îÄ‚îÄ Adds transport cost (based on weight, distance, incoterm)
   ‚îú‚îÄ‚îÄ Adds special fees (cutting, processing)
   ‚îú‚îÄ‚îÄ System recalculates grand total
   ‚îú‚îÄ‚îÄ Operator adds internal notes (not visible to customer)
   ‚îú‚îÄ‚îÄ Status changes to 'in_progress'
   ‚îî‚îÄ‚îÄ Operator clicks "Generate Quote"

8. QUOTE PDF GENERATION
   ‚îú‚îÄ‚îÄ Backend generates PDF with:
   ‚îÇ   ‚îú‚îÄ‚îÄ Company letterhead
   ‚îÇ   ‚îú‚îÄ‚îÄ Customer details
   ‚îÇ   ‚îú‚îÄ‚îÄ Line items with final pricing
   ‚îÇ   ‚îú‚îÄ‚îÄ Totals (subtotal, VAT, transport, grand total)
   ‚îÇ   ‚îú‚îÄ‚îÄ Terms & conditions
   ‚îÇ   ‚îú‚îÄ‚îÄ Valid until date (e.g., +14 days)
   ‚îÇ   ‚îú‚îÄ‚îÄ Payment terms
   ‚îÇ   ‚îî‚îÄ‚îÄ Signature block
   ‚îú‚îÄ‚îÄ PDF saved to S3 with unique URL
   ‚îú‚îÄ‚îÄ Updates rfq.final_quote_pdf_url
   ‚îú‚îÄ‚îÄ Updates rfq.final_quote_amount
   ‚îî‚îÄ‚îÄ Status changes to 'quoted'

9. QUOTE DELIVERY
   ‚îú‚îÄ‚îÄ Operator clicks "Send Quote to Customer"
   ‚îú‚îÄ‚îÄ Email composer pre-filled with template
   ‚îú‚îÄ‚îÄ Operator reviews/edits email text
   ‚îú‚îÄ‚îÄ Attaches PDF quote
   ‚îú‚îÄ‚îÄ Sends email (via SendGrid/SES)
   ‚îú‚îÄ‚îÄ Logs email sent in activity timeline
   ‚îî‚îÄ‚îÄ Triggers email: "Quote Ready" to customer with PDF

10. CUSTOMER RESPONSE (Offline)
    ‚îú‚îÄ‚îÄ Customer receives quote via email
    ‚îú‚îÄ‚îÄ Reviews pricing, terms, delivery
    ‚îú‚îÄ‚îÄ Contacts operator via phone/email
    ‚îú‚îÄ‚îÄ Negotiates pricing (optional)
    ‚îú‚îÄ‚îÄ Places order offline (PO, phone, email)
    ‚îî‚îÄ‚îÄ Operator updates status to 'completed'

11. ORDER COMPLETION
    ‚îú‚îÄ‚îÄ Operator marks RFQ as 'completed'
    ‚îú‚îÄ‚îÄ Adds final notes (PO number, delivery date agreed)
    ‚îú‚îÄ‚îÄ Creates rfq_status_history entry
    ‚îú‚îÄ‚îÄ Optional: Triggers email: "Order Confirmed" to customer
    ‚îî‚îÄ‚îÄ RFQ moves to completed queue

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                          STATUS FLOW DIAGRAM                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

submitted ‚Üí acknowledged ‚Üí in_progress ‚Üí quoted ‚Üí completed
                                               ‚Üò
                                                cancelled
```

### RFQ Status Definitions

| Status | Description | Triggered By | Customer Notification |
|--------|-------------|--------------|----------------------|
| **submitted** | RFQ received from customer | Frontend POST /api/rfq | RFQ Confirmation email |
| **acknowledged** | RFQ assigned to operator | Operator assigns to self | RFQ Acknowledged email |
| **in_progress** | Operator working on pricing | Operator starts pricing | None (internal) |
| **quoted** | Quote generated and ready | Operator generates PDF | Quote Ready email (with PDF) |
| **completed** | Order placed and fulfilled | Operator marks complete | Optional: Order Confirmed |
| **cancelled** | RFQ cancelled by customer or ops | Operator or customer | Cancellation email |

---

## Key Technical Decisions Summary

### 1. Estimate Cart: Frontend vs. Backend Storage
**Decision:** **Frontend-only (localStorage)** for guest users, **Backend** for authenticated users

**Rationale:**
- Guests can browse and build cart without signup friction
- Cart persists across sessions via localStorage
- Authenticated users: cart synced to backend (saved_projects table)
- On RFQ submission, full cart snapshot saved to `rfqs.cart_snapshot` (JSONB)

### 2. Product Pricing: Database Storage
**Decision:** Store **indicative price ranges** (min/max) in `product_prices` table

**Rationale:**
- Display price ranges to give customers ballpark estimates
- Historical pricing tracked with `valid_from` and `valid_to` dates
- Final pricing always determined by back-office operator
- Allows future automation (auto-quoting for standard items)

### 3. RFQ Snapshot vs. References
**Decision:** **Snapshot cart data** in `rfqs.cart_snapshot` (JSONB) + **normalize line items** in `rfq_items`

**Rationale:**
- JSONB snapshot preserves exact cart state at submission time
- Normalized `rfq_items` table allows:
  - Back-office pricing edits
  - Reporting and analytics
  - Product performance tracking
- Balance between data integrity and query performance

### 4. Email Service: Transactional vs. Marketing
**Decision:** **SendGrid** for transactional emails, **separate tool** for marketing (future)

**Rationale:**
- SendGrid reliable for critical RFQ notifications
- Templates stored in backend with variable interpolation
- Delivery tracking and bounce handling built-in
- Marketing emails (newsletters, promotions) handled separately

### 5. File Storage: S3 vs. Local
**Decision:** **Local storage for development**, **AWS S3 for production**

**Rationale:**
- Development: simple local filesystem (./uploads/)
- Production: S3 for scalability, reliability, CDN integration
- Backend uses abstraction layer (FileStorageService) to switch between implementations

---

## Conclusion

This technical implementation plan provides a comprehensive roadmap for building **MetalPro**, a modern B2B metal materials marketplace with full backend support for offer request management and back-office operations. The phased approach ensures iterative delivery of value while maintaining code quality, performance, and user experience standards.

**Key Deliverables:**
1. **Customer-Facing Frontend:** Product catalog, cart, RFQ submission
2. **Backend API:** PostgreSQL database, REST API, authentication, file storage
3. **Back-Office System:** RFQ management, pricing, quote generation, email automation
4. **Database:** Comprehensive schema with audit logging, status tracking, and historical data

**Current Status:** Phase 1 complete (Landing Page)
**Next Steps:**
1. Set up backend infrastructure (PostgreSQL, Express/NestJS, Redis)
2. Implement database schema and migrations
3. Begin Phase 2 (Product Catalog & Discovery System)
4. Develop Phase 4 (Estimate Cart & RFQ Flow) in parallel with backend
5. Build Phase 10 (Back-Office System) after RFQ submission is live

---

## Appendix: File Structure

```
steel-craft-flow/
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îú‚îÄ‚îÄ images/
‚îÇ   ‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îî‚îÄ‚îÄ favicon.ico
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ account/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bom/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cart/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ catalog/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ home/ ‚úÖ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout/ ‚úÖ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ pdp/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rfq/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ search/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ seo/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui/ ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ context/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AuthContext.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CartContext.tsx
‚îÇ   ‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ products.ts
‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ use-analytics.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ use-cart.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ use-mobile.tsx ‚úÖ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ use-product-config.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ use-search.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ use-toast.ts ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ i18n/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ seo/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/ ‚úÖ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validation/
‚îÇ   ‚îú‚îÄ‚îÄ locales/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ro.json
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ en.json
‚îÇ   ‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Account.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BOMUpload.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Catalog.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CategoryPage.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EstimateCart.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Index.tsx ‚úÖ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Login.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NotFound.tsx ‚úÖ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ProductDetail.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RFQConfirmation.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RFQForm.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Signup.tsx
‚îÇ   ‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ product.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cart.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ rfq.ts
‚îÇ   ‚îú‚îÄ‚îÄ App.css ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ App.tsx ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ index.css ‚úÖ
‚îÇ   ‚îú‚îÄ‚îÄ main.tsx ‚úÖ
‚îÇ   ‚îî‚îÄ‚îÄ vite-env.d.ts ‚úÖ
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îî‚îÄ‚îÄ TECHNICAL_IMPLEMENTATION_PLAN.md ‚úÖ
‚îú‚îÄ‚îÄ .env.local
‚îú‚îÄ‚îÄ .gitignore ‚úÖ
‚îú‚îÄ‚îÄ components.json ‚úÖ
‚îú‚îÄ‚îÄ eslint.config.js ‚úÖ
‚îú‚îÄ‚îÄ index.html ‚úÖ
‚îú‚îÄ‚îÄ package.json ‚úÖ
‚îú‚îÄ‚îÄ postcss.config.js ‚úÖ
‚îú‚îÄ‚îÄ README.md ‚úÖ
‚îú‚îÄ‚îÄ tailwind.config.ts ‚úÖ
‚îú‚îÄ‚îÄ tsconfig.json ‚úÖ
‚îú‚îÄ‚îÄ tsconfig.app.json ‚úÖ
‚îú‚îÄ‚îÄ tsconfig.node.json ‚úÖ
‚îî‚îÄ‚îÄ vite.config.ts ‚úÖ
```

---

**Document Version:** 1.0
**Last Updated:** 2025-01-18
**Author:** Claude (Anthropic)
**Project:** MetalPro - B2B Metal Materials Marketplace